<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Redux ä¸­æ–‡å®˜ç½‘ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Redux ä¸­æ–‡å®˜ç½‘ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux ä¸­æ–‡å®˜ç½‘" href="/opensearch.xml"><title data-react-helmet="true">Redux æ·±å…¥æµ…å‡º, ç¬¬ 7 èŠ‚: æ ‡å‡† Redux æ¨¡å¼ | Redux ä¸­æ–‡å®˜ç½‘</title><meta data-react-helmet="true" property="og:url" content="http://cn.redux.js.org/tutorials/fundamentals/part-7-standard-patterns"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Redux æ·±å…¥æµ…å‡º, ç¬¬ 7 èŠ‚: æ ‡å‡† Redux æ¨¡å¼ | Redux ä¸­æ–‡å®˜ç½‘"><meta data-react-helmet="true" name="description" content="The official Fundamentals tutorial for Redux: learn the standard patterns used in real-world Redux apps"><meta data-react-helmet="true" property="og:description" content="The official Fundamentals tutorial for Redux: learn the standard patterns used in real-world Redux apps"><meta data-react-helmet="true" property="og:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://cn.redux.js.org/tutorials/fundamentals/part-7-standard-patterns"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/tutorials/fundamentals/part-7-standard-patterns" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/tutorials/fundamentals/part-7-standard-patterns" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a0cae3ae.css">
<link rel="preload" href="/assets/js/runtime~main.9044bd3c.js" as="script">
<link rel="preload" href="/assets/js/main.983ddc03.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Redux ä¸­æ–‡å®˜ç½‘</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction/getting-started">å…¥é—¨</a><a class="navbar__item navbar__link" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a><a class="navbar__item navbar__link" href="/api/api-reference">API</a><a class="navbar__item navbar__link" href="/faq">å¸¸è§é—®é¢˜</a><a class="navbar__item navbar__link" href="/style-guide/style-guide">æœ€ä½³å®è·µ</a><a href="https://www.github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æºç </a><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">çº é”™</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Redux ä¸­æ–‡å®˜ç½‘</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction/getting-started">å…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" href="/api/api-reference">API</a></li><li class="menu__list-item"><a class="menu__link" href="/faq">å¸¸è§é—®é¢˜</a></li><li class="menu__list-item"><a class="menu__link" href="/style-guide/style-guide">æœ€ä½³å®è·µ</a></li><li class="menu__list-item"><a href="https://www.github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="menu__link">æºç </a></li><li class="menu__list-item"><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="menu__link">çº é”™</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ç®€ä»‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/getting-started">å…¥é—¨ Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/installation">å®‰è£…</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/core-concepts">æ ¸å¿ƒæ¦‚å¿µ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/learning-resources">å­¦ä¹ èµ„æº</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/ecosystem">ç”Ÿæ€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/examples">ç¤ºä¾‹</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">æ•™ç¨‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/index">æ•™ç¨‹ç›®å½•</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redux å¾ªåºæ¸è¿›</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-1-overview-concepts">åŸºç¡€æ¦‚å¿µ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-2-app-structure">åº”ç”¨ç»“æ„</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-3-data-flow">æ•°æ®æµåŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-4-using-data">ä½¿ç”¨æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-5-async-logic">å¼‚æ­¥é€»è¾‘ä¸æ•°æ®è¯·æ±‚</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-6-performance-normalization">æ€§èƒ½ä¸æ•°æ®èŒƒå¼åŒ–</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Redux æ·±å…¥æµ…å‡º</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-1-overview">Redux æ¦‚è§ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-2-concepts-data-flow">Redux æ¦‚å¿µä¸æ•°æ®æµ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-3-state-actions-reducers">State, Actions, and Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-4-store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-5-ui-react">UI and React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-6-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/tutorials/fundamentals/part-7-standard-patterns">æ ‡å‡† Redux æ¨¡å¼</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/fundamentals/part-8-modern-redux">Modern Redux with Redux Toolkit</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">æŠ€å·§</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/recipe-index">æŠ€å·§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/configuring-your-store">é…ç½® Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/usage-with-typescript">Usage with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/migrating-to-redux">è¿ç§»åˆ° Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/using-object-spread-operator">ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/reducing-boilerplate">å‡å°‘æ ·æ¿ä»£ç </a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/server-rendering">æœåŠ¡ç«¯æ¸²æŸ“</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/writing-tests">ç¼–å†™æµ‹è¯•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/computing-derived-data">è®¡ç®—è¡ç”Ÿæ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/implementing-undo-history">å®ç°æ’¤é”€é‡åš</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/isolating-redux-sub-apps">å­åº”ç”¨éš”ç¦»</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/code-splitting">ä»£ç åˆ†å‰²</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/troubleshooting">Troubleshooting</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ç»„ç»‡ Reducers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/structuring-reducers">ç»„ç»‡ Reducer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/prerequisite-concepts">Reducer å¿…å¤‡æ¦‚å¿µ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/basic-reducer-structure">Reducer å’Œ State çš„åŸºæœ¬ç»“æ„</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/splitting-reducer-logic">æ‹†åˆ† Reducer é€»è¾‘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/refactoring-reducer-example">é‡æ„ Reducerï¼šåŸºäºå‡½æ•°åˆ†è§£ï¼ˆFunctional Decompositionï¼‰å’Œ Reducer ç»„åˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/using-combinereducers">`combineReducers` ç”¨æ³•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/beyond-combinereducers">`combineReducers` è¿›é˜¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/normalizing-state-shape">State èŒƒå¼åŒ–</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/updating-normalized-data">ç®¡ç†èŒƒå¼åŒ–æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/reusing-reducer-logic">Reducer é€»è¾‘å¤ç”¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/immutable-update-patterns">Immutable ä¸å¯å˜æ›´æ–°æ¨¡å¼</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/initializing-state">åˆå§‹åŒ– State</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">æ·±å…¥ç†è§£ Redux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">åƒ Redux ä¸€æ ·æ€è€ƒ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/motivation">åŠ¨æœº</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/three-principles">ä¸‰å¤§åŸåˆ™</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/glossary">è¯æ±‡è¡¨</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">å†å²ä¸è®¾è®¡åŸåˆ™</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/prior-art">å…ˆå‰æŠ€æœ¯</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/middleware">Middleware ä¸­é—´ä»¶</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">å¸¸è§é—®é¢˜</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq">Redux FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/general">Redux FAQ: General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/reducers">Redux FAQ: Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/organizing-state">Redux FAQ: Organizing State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/store-setup">Redux FAQ: Store Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/actions">Redux FAQ: Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/immutable-data">Redux FAQ: Immutable Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/code-structure">Redux FAQ: Code Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/performance">Redux FAQ: Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/design-decisions">Redux FAQ: Design Decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/react-redux">Redux FAQ: React Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/miscellaneous">Redux FAQ: Miscellaneous</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ç¼–ç è§„èŒƒ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/style-guide/style-guide">Style Guide: Best Practices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API æ–‡æ¡£</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/createstore">createStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/combinereducers">combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/applymiddleware">applyMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/bindactioncreators">bindActionCreators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/compose">compose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/overview">Redux Toolkit: æ¦‚è§ˆ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Redux æ·±å…¥æµ…å‡º, ç¬¬ 7 èŠ‚: æ ‡å‡† Redux æ¨¡å¼</h1></header><div class="markdown"><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>ä½ å°†å­¦åˆ°</h5></div><div class="admonition-content"><ul><li>å®é™…åº”ç”¨ Redux æ—¶çš„æ ‡å‡†æ¨¡å¼ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™äº›æ¨¡å¼ä¼šå­˜åœ¨<ul><li>ä½¿ç”¨ Action creators å°è£… action å¯¹è±¡</li><li>è®°å¿†åŒ– selectors ä»¥æé«˜æ€§èƒ½</li><li>é€šè¿‡åŠ è½½æšä¸¾å€¼è·Ÿè¸ªè¯·æ±‚çŠ¶æ€</li><li>è§„èŒƒåŒ–çŠ¶æ€ä»¥ç®¡ç†é¡¹ç›®é›†åˆ</li><li>ä¸ promises å’Œ thunks ä¸€èµ·å·¥ä½œ</li></ul></li></ul></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>å‰æ</h5></div><div class="admonition-content"><ul><li>ç†è§£äº†ä¹‹å‰æ‰€æœ‰å°èŠ‚çš„å†…å®¹</li></ul></div></div><p>åœ¨<a href="/tutorials/fundamentals/part-6-async-logic">ç¬¬ 6 èŠ‚ï¼šå¼‚æ­¥é€»è¾‘å’Œæ•°æ®è¯·æ±‚</a>ï¼Œæˆ‘ä»¬çœ‹è§äº†æ€æ ·ä½¿ç”¨ Redux ä¸­é—´ä»¶ç¼–å†™å¼‚æ­¥é€»è¾‘æ¥ä¸ store è¿›è¡Œäº¤äº’ã€‚æˆ‘ä»¬ä½¿ç”¨ Redux &quot;thunk&quot; ä¸­é—´ä»¶æ¥ç¼–å†™å¯ä»¥åŒ…å«å¯é‡ç”¨å¼‚æ­¥é€»è¾‘çš„å‡½æ•°ï¼Œè€Œæ— éœ€æå‰çŸ¥é“ä»–ä»¬å°†è¦ä¸å“ªäº› Redux store è¿›è¡Œé€šä¿¡ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»äº† Redux å®é™…å·¥ä½œåŸç†çš„åŸºç¡€çŸ¥è¯†ã€‚ä½†æ˜¯ï¼Œç°å®ä¸–ç•Œçš„ Redux åº”ç”¨ç¨‹åºåœ¨è¿™äº›åŸºç¡€çŸ¥è¯†çš„åŸºç¡€ä¸Šä½¿ç”¨äº†ä¸€äº›é¢å¤–çš„æ¨¡å¼ã€‚</p><p>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œ<strong>è¿™äº›æ¨¡å¼éƒ½ä¸æ˜¯ä½¿ç”¨ Redux æ‰€å¿…éœ€çš„ï¼</strong> ä½†æ˜¯ï¼Œè¿™äº›æ¨¡å¼ä¸­çš„æ¯ä¸€ä¸ªéƒ½å­˜åœ¨å¾ˆå¥½çš„ç†ç”±ï¼Œå¹¶ä¸”æ‚¨å°†åœ¨å‡ ä¹æ¯ä¸ª Redux ä»£ç åº“ä¸­çœ‹åˆ°éƒ¨åˆ†æˆ–å…¨éƒ¨æ¨¡å¼ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é‡åšç°æœ‰çš„å¾…åŠäº‹é¡¹åº”ç”¨ä»£ç ä»¥ä½¿ç”¨å…¶ä¸­ä¸€äº›æ¨¡å¼ï¼Œå¹¶è®¨è®ºä¸ºä»€ä¹ˆå®ƒä»¬åœ¨ Redux åº”ç”¨ä¸­å¸¸ç”¨ã€‚ç„¶ååœ¨<a href="/tutorials/fundamentals/part-8-modern-redux"><strong>ç¬¬ 8 èŠ‚</strong></a>ï¼Œæˆ‘ä»¬å°†è®¨è®ºâ€œç°ä»£åŒ– Reduxâ€ï¼ŒåŒ…æ‹¬æ€æ ·ä½¿ç”¨æˆ‘ä»¬çš„å®˜æ–¹ <a href="https://redux-toolkit.js.org" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> åº“ç®€åŒ–æˆ‘ä»¬å·²å†™çš„ Redux é€»è¾‘ã€‚ä»¥åŠä¸ºä»€ä¹ˆ<strong>æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Redux Toolkit ä½œä¸ºç¼–å†™ Redux åº”ç”¨çš„æ ‡å‡†æ–¹æ³•</strong>ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="action-creators"></a>Action Creators<a class="hash-link" href="#action-creators" title="Direct link to heading">#</a></h2><p>åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯åœ¨ dispatch çš„åœ°æ–¹å­—é¢é‡åœ°ç›´æ¥å†™ action å¯¹è±¡ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> trimmedText </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ä½†æ˜¯ï¼Œåœ¨å®è·µä¸­ï¼Œç¼–å†™è‰¯å¥½çš„ Redux åº”ç”¨åœ¨æˆ‘ä»¬ dispatch è¿™äº› action å¯¹è±¡æ—¶å®é™…ä¸Šä¸ä¼šä»¥å†…è”æ–¹å¼ç¼–å†™å®ƒä»¬ã€‚ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨ &quot;action creator&quot; å‡½æ•°ã€‚</p><p>&quot;action creator&quot; å°±æ˜¯ä¸€ä¸ªåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª action object çš„å‡½æ•°ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨å®ƒä»¬ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…æ¯æ¬¡éƒ½æ‰‹åŠ¨ç¼–å†™æ“ä½œå¯¹è±¡ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">todoAdded</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">text</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> text</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>æˆ‘ä»¬<strong>è°ƒç”¨è¿™ä¸ª action creator</strong>ï¼Œç„¶å<strong>æŠŠè¿”å›å€¼ç›´æ¥ä¼ ç»™ <code>dispatch</code></strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todoAdded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;Buy milk&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">log</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// [ {id: 0, text: &#x27;Buy milk&#x27;, completed: false}]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><details class="detailed-explanation"><summary><h4>Detailed Explanation: ä¸ºä»€ä¹ˆä½¿ç”¨ Action Creators?</h4></summary><p>åœ¨æˆ‘ä»¬çš„å°å‹ todo åº”ç”¨ä¸­ï¼Œæ¯æ¬¡éƒ½ç›´æ¥å†™ action å¯¹è±¡ä¸æ˜¯å•¥éš¾äº‹ã€‚å®é™…ä¸Šï¼Œåœ¨ä½¿ç”¨ action creators çš„æ–¹å¼åï¼Œæˆ‘ä»¬å·²ç»åšäº† <em>é¢å¤–</em> çš„å·¥ä½œäº† - æˆ‘ä»¬å·²ç»å†™äº†ä¸€ä¸ªå‡½æ•° <em>å’Œ</em> ä¸€ä¸ª action å¯¹è±¡ã€‚</p><p>ä½†æ˜¯ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ç¨‹åºçš„å¤šä¸ªåœ°æ–¹ dispatch ç›¸åŒçš„ action ï¼Ÿæˆ–è€…å‡å¦‚å½“æˆ‘ä»¬æ¯æ¬¡ dispatch ä¸€ä¸ª action æ—¶éƒ½è¦åšä¸€äº›é¢å¤–çš„é€»è¾‘ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ ID ï¼Ÿæˆ‘ä»¬æœ€ç»ˆå°†ä¸å¾—ä¸åœ¨æ¯æ¬¡éœ€è¦è°ƒåº¦è¯¥æ“ä½œæ—¶å¤åˆ¶ç²˜è´´å…¶ä»–è®¾ç½®é€»è¾‘ã€‚</p><p>Action creators æ“ä½œåˆ›å»ºè€…æœ‰ä¸¤ä¸ªä¸»è¦ç”¨é€”ï¼š:</p><ul><li>å‡†å¤‡å’Œæ ¼å¼åŒ– action å¯¹è±¡çš„å†…å®¹</li><li>æ¯å½“æˆ‘ä»¬åˆ›å»º action æ—¶ï¼Œå°è£…æ‰€éœ€çš„ä»»ä½•å…¶ä»–å·¥ä½œ</li></ul><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€è‡´çš„æ–¹æ³•æ¥åˆ›å»º actionï¼Œæ— è®ºæ˜¯å¦æœ‰ä»»ä½•é¢å¤–çš„å·¥ä½œéœ€è¦å®Œæˆã€‚thunk ä¹Ÿæ˜¯ä¸€æ ·çš„ç›®çš„ã€‚</p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="using-action-creators"></a>Using Action Creators<a class="hash-link" href="#using-action-creators" title="Direct link to heading">#</a></h3><p>è®©æˆ‘ä»¬æ›´æ–°ä¸€ä¸‹ todosSlice æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸ºå‡ ç§ action ç±»å‹ä½¿ç”¨ action creatorsã€‚</p><p>æˆ‘ä»¬å°†ä»åˆ°ç›®å‰ä¸ºæ­¢ä¸€ç›´ä½¿ç”¨çš„ä¸¤ä¸ªä¸»è¦æ“ä½œå¼€å§‹ï¼šä»æœåŠ¡å™¨åŠ è½½å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œä»¥åŠåœ¨å°†å…¶ä¿å­˜åˆ°æœåŠ¡å™¨åæ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹ã€‚</p><p>å½“ä¸‹, <code>todosSlice.js</code> é‡Œç›´æ¥ dispatch ä¸€ä¸ª action å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoaded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ›å»ºå¹¶è¿”å›ç›¸åŒç±»å‹çš„ action å¯¹è±¡ï¼Œä½†æ¥å— todos æ•°ç»„ä½œä¸ºå…¶å‚æ•°ï¼Œå¹¶å°†å…¶ä½œä¸º <code>action.payload</code> æ”¾å…¥ action ä¸­ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>fetchTodos </code>thunk ä¸­çš„æ–° action creator æ¥ dispatch actionï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">todosLoaded</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">todos</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoaded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> todos</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchTodos</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">dispatch</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">get</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;/fakeApi/todos&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todosLoaded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>æˆ‘ä»¬ä¹Ÿä¸º &quot;todo added&quot; action åšä¸€æ ·çš„äº‹æƒ…:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">todoAdded</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> todo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">saveNewTodo</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">text</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">saveNewTodoThunk</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">dispatch</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialTodo </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> text </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">post</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;/fakeApi/todos&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">todo</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> initialTodo </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todoAdded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todo</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>å†ä¸º &quot;color filter changed&quot; action åšä¸€æ ·çš„äº‹æƒ…:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/filters/filtersSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">colorFilterChanged</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">color</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> changeType</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;filters/colorFilterChanged&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> color</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> changeType </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ç”±äºæ­¤ action æ˜¯ä» <code>&lt;Footer&gt;</code> ç»„ä»¶ dispatch çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°† <code>colorFilterChanged</code> å¯¼å…¥åˆ°è¯¥å¤„å¹¶ä½¿ç”¨å®ƒï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/footer/Footer.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> useSelector</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> useDispatch </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> availableColors</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> capitalize </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../filters/colors&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">StatusFilters</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> colorFilterChanged </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../filters/filtersSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit child components</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#E6D874">Footer</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todosRemaining </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> uncompletedTodos </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">filter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> uncompletedTodos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">length</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> status</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> colors </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">filters</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onMarkCompletedClicked</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/allCompleted&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onClearCompletedClicked</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/completedCleared&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onColorChange</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">color</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> changeType</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">colorFilterChanged</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> changeType</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onStatusChange</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">status</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;filters/statusFilterChanged&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> status </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// omit rendering output</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token maybe-class-name">Footer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¯·æ³¨æ„ï¼Œ<code>colorFilterChanged</code> action creator å®é™…ä¸Šæ¥å—ä¸¤ä¸ªä¸åŒçš„å‚æ•°ï¼Œç„¶åå°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ä»¥å½¢æˆæ­£ç¡®çš„ <code>action.payload</code> å­—æ®µã€‚</p><p>è¿™ä¸ä¼šæ”¹å˜åº”ç”¨ç¨‹åºçš„å·¥ä½œæ–¹å¼æˆ– Redux æ•°æ®æµçš„è¡Œä¸ºæ–¹å¼ - æˆ‘ä»¬ä»åœ¨åˆ›å»º action å¯¹è±¡å¹¶ dispatch å®ƒä»¬ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨ä¸æ˜¯ä¸€ç›´ç›´æ¥åœ¨ä»£ç ä¸­ç¼–å†™ action å¯¹è±¡ï¼Œè€Œæ˜¯ä½¿ç”¨ action creator åœ¨ dispatch è¿™äº› action å¯¹è±¡ä¹‹å‰å¯¹å…¶è¿›è¡Œå‡†å¤‡ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»“åˆ thunk å‡½æ•°ä½¿ç”¨ action creatorsï¼Œå®é™…ä¸Š<a href="/tutorials/fundamentals/part-6-async-logic#saving-todo-items">åœ¨ä¹‹å‰çš„ç« èŠ‚æˆ‘ä»¬å·²ç»åœ¨ action creator å†…åŒ…è£¹äº†ä¸€ä¸ª thunk äº†</a>ã€‚æˆ‘ä»¬ä¸“é—¨å°† <code>saveNewTodo</code> åŒ…è£…åœ¨ &quot;thunk action creator&quot; å‡½æ•°ä¸­ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¼ å…¥ <code>text</code> å‚æ•°ã€‚è™½ç„¶ <code>fetchTodos</code> ä¸é‡‡ç”¨ä»»ä½•å‚æ•°ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å°†å…¶åŒ…è£…åœ¨æ“ä½œåˆ›å»ºå™¨ä¸­ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchTodos</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchTodosThunk</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">dispatch</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">get</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;/fakeApi/todos&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todosLoaded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»æ›´æ”¹å®ƒåœ¨ <code>index.js</code> ä¸­ dispatch çš„ä½ç½®ä»¥è°ƒç”¨å¤–éƒ¨ thunk action creator å‡½æ•°ï¼Œå¹¶å°†è¿”å›çš„å†…éƒ¨ thunk å‡½æ•°ä¼ é€’ç»™ <code>dispatch</code>ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/index.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">store</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./store&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> fetchTodos </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./features/todos/todosSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">fetchTodos</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨ <code>function</code> å…³é”®å­—ç¼–å†™äº† thunksï¼Œä»¥æ˜ç¡®ä»–ä»¬åœ¨åšä»€ä¹ˆã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°è¯­æ³•æ¥ç¼–å†™å®ƒä»¬ã€‚ä½¿ç”¨éšå¼è¿”å›å¯ä»¥ç¼©çŸ­ä»£ç ï¼Œå°½ç®¡å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰ç®­å¤´å‡½æ•°ï¼Œå®ƒä¹Ÿå¯èƒ½ä½¿é˜…è¯»å˜å¾—æœ‰ç‚¹å›°éš¾ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// Same thing as the above example!</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">fetchTodos</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token parameter">dispatch</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">get</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;/fakeApi/todos&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todosLoaded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬æ„¿æ„ï¼Œæˆ‘ä»¬ <em>å¯ä»¥</em> ç¼©çŸ­ action creatorsï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">todoAdded</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> todo </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ç”±æ‚¨å†³å®šä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ç®­å¤´å‡½æ•°æ˜¯å¦æ›´å¥½ã€‚</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>æœ‰å…³ action creators ä¸ºä½•æœ‰ç”¨çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š</p><ul><li><a href="https://blog.isquaredsoftware.com/2016/10/idiomatic-redux-why-use-action-creators/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: Why Use Action Creators?</a></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="è®°å¿†åŒ–-selectors"></a>è®°å¿†åŒ– Selectors<a class="hash-link" href="#è®°å¿†åŒ–-selectors" title="Direct link to heading">#</a></h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°æˆ‘ä»¬å¯ä»¥ç¼–å†™ &quot;selector&quot; å‡½æ•°ï¼Œå®ƒæ¥å— Redux <code>state</code> å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodos</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>å‡å¦‚æˆ‘ä»¬éœ€è¦ <em>æ´¾ç”Ÿ</em> ä¸€äº›æ•°æ®æ€ä¹ˆåŠï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œæˆ–è®¸æˆ‘ä»¬å¸Œæœ›åªè¦ä¸€ä¸ª todo IDs ç»„æˆçš„æ•°ç»„ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodoIds</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ç„¶è€Œï¼Œ<code>array.map()</code> æ¯æ¬¡éƒ½è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„å¼•ç”¨ï¼ˆreferenceï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ <em>æ¯æ¬¡</em> dispatch action å React-Redux <code>useSelector</code> hook éƒ½ä¼šé‡æ–°è°ƒç”¨å…¶ selector å‡½æ•°ï¼Œå¦‚æœ selector è¿”å›ä¸€ä¸ªæ–°å€¼ï¼Œç»„ä»¶ä¸€å®šä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<strong>åœ¨ <em>æ¯ä¸ª</em> action åè°ƒç”¨ <code>useSelector(selectTodoIds)</code> å°† <em>æ€»æ˜¯</em> é€ æˆé‡æ¸²æŸ“ï¼Œå› ä¸ºæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„å¼•ç”¨`</strong></p><p>åœ¨ç¬¬ 5 èŠ‚ï¼Œæˆ‘ä»¬çœ‹åˆ°<a href="/tutorials/fundamentals/part-5-ui-react#selecting-data-in-list-items-by-id">æˆ‘ä»¬ä¼ äº† <code>shallowEqual</code> ä½œä¸ºå‚æ•°ç»™ <code>useSelector</code></a>ã€‚ç°åœ¨æœ‰å¦ä¸€é€‰æ‹©ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ â€œè®°å¿†åŒ–çš„ï¼ˆmemoizedï¼‰â€ selectorsã€‚</p><p><strong>è®°å¿†åŒ–</strong> æ˜¯ç¼“å­˜æŠ€æœ¯çš„ä¸€ç§ - å…·ä½“æ¥è¯´ï¼Œä¿å­˜æ˜‚è´µè®¡ç®—çš„ç»“æœï¼Œå¦‚æœæˆ‘ä»¬ä»¥åçœ‹åˆ°ç›¸åŒçš„è¾“å…¥ï¼Œè¯·é‡ç”¨è¿™äº›ç»“æœã€‚</p><p><strong>è®°å¿†åŒ– selector functions</strong> æ˜¯ä¿å­˜æœ€æ–°ç»“æœå€¼çš„ selectorï¼Œå¦‚æœä½¿ç”¨ç›¸åŒçš„è¾“å…¥å¤šæ¬¡è°ƒç”¨å®ƒä»¬ï¼Œåˆ™å°†è¿”å›ç›¸åŒçš„ç»“æœå€¼ã€‚å¦‚æœä½¿ç”¨ä¸ä¸Šæ¬¡ä¸åŒçš„ <em>different</em> è¾“å…¥è°ƒç”¨å®ƒä»¬ï¼Œå®ƒä»¬å°†é‡æ–°è®¡ç®—æ–°çš„ç»“æœå€¼ï¼Œç¼“å­˜è¯¥å€¼ï¼Œç„¶åè¿”å›æ–°ç»“æœã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ç»“åˆ-createselector-è®°å¿†åŒ–-selectors"></a>ç»“åˆ <code>createSelector</code> è®°å¿†åŒ– Selectors<a class="hash-link" href="#ç»“åˆ-createselector-è®°å¿†åŒ–-selectors" title="Direct link to heading">#</a></h3><p><strong><a href="https://github.com/reduxjs/reselect" target="_blank" rel="noopener noreferrer">Reselect library</a> æä¾›äº†ä¸€ä¸ªèƒ½ç”Ÿæˆè®°å¿†åŒ– selector å‡½æ•°çš„ <code>createSelector</code> API</strong>ã€‚è¯¥ API æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ª &quot;input selector&quot; å‡½æ•°ä½œä¸ºå‚æ•°ï¼ŒåŠ ä¸Šä¸€ä¸ª &quot;output selector&quot;ï¼Œå¹¶è¿”å›æ–°çš„ selector å‡½æ•°ã€‚æ¯æ¬¡è°ƒç”¨é€‰æ‹©å™¨æ—¶ï¼š</p><ul><li>æ‰€æœ‰ &quot;input selectors&quot; éƒ½ä½¿ç”¨æ‰€æœ‰å‚æ•°è°ƒç”¨</li><li>å¦‚æœä»»ä½• input selector è¿”å›å€¼å·²æ›´æ”¹ï¼Œ&quot;output selector&quot; å°†é‡æ–°è¿è¡Œ</li><li>æ‰€æœ‰ input selector çš„ç»“æœéƒ½å°†æˆä¸º output selector çš„å‚æ•°</li><li>output selector çš„æœ€ç»ˆç»“æœå°†ç¼“å­˜ä»¥ä¾›ä¸‹æ¬¡ä½¿ç”¨</li></ul><p>è®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªè®°å¿†åŒ–ç‰ˆçš„ <code>selectTodoIds</code>ï¼Œå¹¶ä¸”åœ¨ <code>&lt;TodoList&gt;</code> ä¸­ä½¿ç”¨ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… Reselect:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#E6D874">npm</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">install</span><span class="token plain"> reselect</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>æ¥ç€æˆ‘ä»¬å¯¼å…¥ä¸”è°ƒç”¨ <code>createSelector</code>ã€‚æˆ‘ä»¬æœ€åˆçš„ <code>selectTodoIds</code> å‡½æ•°æ˜¯åœ¨ <code>TodoList.js</code> ä¸­å®šä¹‰çš„ï¼Œä½†æ›´å¸¸è§çš„æ˜¯é€‰æ‹©å™¨å‡½æ•°å†™åœ¨ç›¸å…³çš„åˆ‡ç‰‡æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°å¾…åŠäº‹é¡¹åˆ‡ç‰‡ä¸­ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> createSelector </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;reselect&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit reducer</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit action creators</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> selectTodoIds </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// First, pass one or more &quot;input selector&quot; functions:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Then, an &quot;output selector&quot; that receives all the input results as arguments</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// and returns a final result value</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">todos</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>æ¥ä¸‹æ¥, åœ¨ <code>&lt;TodoList&gt;</code> é‡Œä½¿ç”¨:</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/TodoList.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> useSelector</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> shallowEqual </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> selectTodoIds </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./todosSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">TodoListItem</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./TodoListItem&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#E6D874">TodoList</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todoIds </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectTodoIds</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> renderedListItems </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> todoIds</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todoId</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token maybe-class-name">TodoListItem</span><span class="token plain"> key</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> id</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">/</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">ul className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;todo-list&quot;</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">renderedListItems</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token operator" style="color:#F8F8F2">/</span><span class="token plain">ul</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¿™å®é™…ä¸Šä¸ <code>shallowEqual</code> æ¯”è¾ƒå‡½æ•°çš„è¡Œä¸ºç•¥æœ‰ä¸åŒã€‚æ¯å½“ <code>state.todos</code> æ•°ç»„æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ todo IDs æ•°ç»„ã€‚è¿™åŒ…æ‹¬å¯¹å¾…åŠäº‹é¡¹çš„ä»»ä½•ä¸å¯å˜æ›´æ–°ï¼Œä¾‹å¦‚åˆ‡æ¢å…¶ <code>completed</code> å­—æ®µï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»ä¸ºä¸å¯å˜æ›´æ–°åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>ä»…å½“æ‚¨å®é™…ä»åŸå§‹æ•°æ®æ´¾ç”Ÿå…¶ä»–å€¼æ—¶ï¼Œè®°å¿†é€‰æ‹©å™¨æ‰æœ‰ç”¨ã€‚å¦‚æœåªæ˜¯æŸ¥æ‰¾å¹¶è¿”å›ç°æœ‰å€¼ï¼Œåˆ™å¯ä»¥å°†é€‰æ‹©å™¨ä¿ç•™ä¸ºæ™®é€šå‡½æ•°ã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="å…·æœ‰å¤šä¸ªå‚æ•°çš„-selectors"></a>å…·æœ‰å¤šä¸ªå‚æ•°çš„ Selectors<a class="hash-link" href="#å…·æœ‰å¤šä¸ªå‚æ•°çš„-selectors" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºåº”è¯¥èƒ½å¤Ÿæ ¹æ®å…¶å®ŒæˆçŠ¶æ€è¿‡æ»¤å¯è§çš„å¾…åŠäº‹é¡¹ã€‚è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè®°å¿†é€‰æ‹©å™¨ï¼Œè¿”å›ç»è¿‡è¿‡æ»¤çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚ </p><p>æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬éœ€è¦æ•´ä¸ª <code>todos</code> æ•°ç»„ä½œä¸º output selector çš„ä¸€ä¸ªå‚æ•°ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¼ å…¥å½“å‰å®ŒæˆçŠ¶æ€ç­›é€‰å™¨å€¼ã€‚æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„ &quot;input selector&quot; æ¥æå–æ¯ä¸ªå€¼ï¼Œå¹¶å°†ç»“æœä¼ é€’ç»™ &quot;output selector&quot;ã€‚</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> createSelector </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;reselect&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">StatusFilters</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../filters/filtersSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit other code</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> selectFilteredTodos </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// First input selector: all todos</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Second input selector: current status filter</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">filters</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Output selector: receives both values</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todos</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> status</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">status </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token maybe-class-name">StatusFilters</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access maybe-class-name">All</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todos</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> completedStatus </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> status </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token maybe-class-name">StatusFilters</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access maybe-class-name">Completed</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// Return either active or completed todos based on filter</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">filter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> completedStatus</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>:::è­¦å‘Š</p><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨åœ¨ä¸¤ä¸ªåˆ‡ç‰‡ä¹‹é—´æ·»åŠ äº†ä¸€ä¸ªå¯¼å…¥ä¾èµ–å…³ç³» - <code>todosSlice</code> æ­£åœ¨ä» <code>filtersSlice</code> å¯¼å…¥ä¸€ä¸ªå€¼ã€‚è¿™æ˜¯åˆæ³•çš„ï¼Œä½†è¦å°å¿ƒã€‚<strong>å¦‚æœä¸¤ä¸ªåˆ‡ç‰‡ <em>éƒ½åœ¨</em> å°è¯•ä»å½¼æ­¤å¯¼å…¥æŸäº›å†…å®¹ï¼Œåˆ™æœ€ç»ˆå¯èƒ½ä¼šé‡åˆ°â€œå¾ªç¯å¯¼å…¥ä¾èµ–é¡¹â€é—®é¢˜ï¼Œä»è€Œå¯¼è‡´ä»£ç å´©æºƒ</strong>ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè¯·å°è¯•å°†ä¸€äº›å¸¸ç”¨ä»£ç ç§»åŠ¨åˆ°å…¶è‡ªå·±çš„æ–‡ä»¶ä¸­ï¼Œç„¶åæ”¹ä¸ºä»è¯¥æ–‡ä»¶å¯¼å…¥ã€‚</p><p>:::</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–°çš„ &quot;filtered todos&quot; é€‰æ‹©å™¨ä½œä¸ºå¦ä¸€ä¸ªé€‰æ‹©å™¨çš„è¾“å…¥ï¼Œè¯¥é€‰æ‹©å™¨è¿”å›è¿™äº›å¾…åŠäº‹é¡¹çš„ IDï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> selectFilteredTodoIds </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Pass our other memoized selector as an input</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  selectFilteredTodos</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// And derive data in the output selector</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">filteredTodos</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> filteredTodos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>å¦‚æœæˆ‘ä»¬åœ¨ <code>&lt;TodoList&gt;</code> ä½¿ç”¨ <code>selectFilteredTodoIds</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿå°†å‡ ä¸ªå¾…åŠäº‹é¡¹æ ‡è®°ä¸ºå·²å®Œæˆï¼š</p><p><img alt="Todo app - todos marked completed" src="/assets/images/todos-app-markedCompleted-fe1ddaba1c85e3f9841728d39459d126.png"></p><p>ç„¶åå°†åˆ—è¡¨ç­›é€‰ä¸º <em>åª</em> æ˜¾ç¤ºå·²å®Œæˆçš„å¾…åŠäº‹é¡¹ï¼š</p><p><img alt="Todo app - todos marked completed" src="/assets/images/todos-app-showCompleted-6eeff512e106457fd4fb469d2f66337d.png"></p><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•æˆ‘ä»¬çš„ <code>selectFilteredTodos</code>ï¼Œä»¥ä¾¿åœ¨é€‰æ‹©ä¸­ä¹ŸåŒ…æ‹¬é¢œè‰²è¿‡æ»¤ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> selectFilteredTodos </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// First input selector: all todos</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  selectTodos</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Second input selector: all filter values</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">filters</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Output selector: receives both values</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todos</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> filters</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> status</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> colors </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> filters</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> showAllCompletions </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> status </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token maybe-class-name">StatusFilters</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access maybe-class-name">All</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">showAllCompletions </span><span class="token operator" style="color:#F8F8F2">&amp;&amp;</span><span class="token plain"> colors</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todos</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> completedStatus </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> status </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token maybe-class-name">StatusFilters</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access maybe-class-name">Completed</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// Return either active or completed todos based on filter</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">filter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> statusMatches </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        showAllCompletions </span><span class="token operator" style="color:#F8F8F2">||</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> completedStatus</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> colorMatches </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> colors</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">||</span><span class="token plain"> colors</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">includes</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">color</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> statusMatches </span><span class="token operator" style="color:#F8F8F2">&amp;&amp;</span><span class="token plain"> colorMatches</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¯·æ³¨æ„ï¼Œé€šè¿‡å°†é€»è¾‘å°è£…åœ¨æ­¤é€‰æ‹©å™¨ä¸­ï¼Œå³ä½¿æ›´æ”¹äº†ç­›é€‰è¡Œä¸ºï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä¹Ÿä¸éœ€è¦æ›´æ”¹ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åŒæ—¶æŒ‰çŠ¶æ€å’Œé¢œè‰²è¿›è¡Œè¿‡æ»¤ï¼š</p><p><img alt="Todo app - status and color filters" src="/assets/images/todos-app-selectorFilters-9ebfc37b389c997e011aff74d525a1aa.png"></p><p>æœ€åï¼Œæˆ‘ä»¬çš„ä»£ç åœ¨å‡ ä¸ªåœ°æ–¹æŸ¥æ‰¾ <code>state.todos</code>ã€‚åœ¨å®Œæˆæœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†æ—¶ï¼Œæˆ‘ä»¬å°†å¯¹è¯¥çŠ¶æ€çš„è®¾è®¡æ–¹å¼è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œå› æ­¤æˆ‘ä»¬å°†æå–ä¸€ä¸ª <code>selectTodos</code> é€‰æ‹©å™¨å¹¶åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°† <code>selectTodoById</code> ç§»åŠ¨åˆ° <code>todosSlice</code> ä¸­ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodos</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodoById</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> todoId</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">selectTodos</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">find</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> todoId</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>å­¦ä¹ æ›´å¤šå…³äºæ€æ ·ä½¿ç”¨ Reselect å’Œè®°å¿†åŒ– selectors ï¼Œè¯·çœ‹ï¼š</p><ul><li>The <a href="https://github.com/reduxjs/reselect" target="_blank" rel="noopener noreferrer">Reselect docs</a></li><li><a href="https://blog.isquaredsoftware.com/2017/12/idiomatic-redux-using-reselect-selectors/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: Using Reselect Selectors for Encapsulation and Performance</a></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="å¼‚æ­¥è¯·æ±‚çŠ¶æ€"></a>å¼‚æ­¥è¯·æ±‚çŠ¶æ€<a class="hash-link" href="#å¼‚æ­¥è¯·æ±‚çŠ¶æ€" title="Direct link to heading">#</a></h2><p>æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥ thunk ä»æœåŠ¡å™¨è·å–å¾…åŠäº‹é¡¹çš„åˆå§‹åˆ—è¡¨ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¼ªé€ çš„æœåŠ¡å™¨ APIï¼Œå› æ­¤è¯¥å“åº”ä¼šç«‹å³è¿”å›ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒAPI è°ƒç”¨å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è§£å†³ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æˆ‘ä»¬ç­‰å¾…å“åº”å®Œæˆæ—¶ï¼Œé€šå¸¸ä¼šæ˜¾ç¤ºæŸç§åŠ è½½å¾®è°ƒå™¨ï¼ˆloading spinnerï¼‰ã€‚</p><p>è¿™é€šå¸¸åœ¨ Redux åº”ç”¨ä¸­é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œå¤„ç†ï¼š</p><ul><li>å…·æœ‰æŸç§â€œåŠ è½½çŠ¶æ€â€å€¼æ¥æŒ‡ç¤ºè¯·æ±‚çš„å½“å‰çŠ¶æ€</li><li><em>åœ¨</em> è¿›è¡Œ API è°ƒç”¨ <em>å‰</em> dispatch &quot;request started&quot; actionï¼Œè¯¥ dispatch é€šè¿‡æ›´æ”¹åŠ è½½çŠ¶æ€å€¼è¿›è¡Œå¤„ç†</li><li>è¯·æ±‚å®Œæˆæ—¶å†æ¬¡æ›´æ–°åŠ è½½çŠ¶æ€å€¼ï¼Œä»¥æŒ‡ç¤ºè°ƒç”¨å·²å®Œæˆ</li></ul><p>ç„¶åï¼ŒUI å±‚åœ¨è¯·æ±‚è¿›è¡Œæ—¶æ˜¾ç¤ºåŠ è½½å¾®è°ƒå™¨ï¼Œå¹¶åœ¨è¯·æ±‚å®Œæˆæ—¶åˆ‡æ¢åˆ°æ˜¾ç¤ºå®é™…æ•°æ®ã€‚</p><p>æˆ‘ä»¬å°†æ›´æ–°å¾…åŠäº‹é¡¹åˆ‡ç‰‡ä»¥è·Ÿè¸ªåŠ è½½çŠ¶æ€å€¼ï¼Œå¹¶ dispatch ä¸€ä¸ªé¢å¤–çš„ <code>&#x27;todos/todosLoading&#x27;</code> action ä½œä¸º <code>fetchTodos</code> thunk çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„ todosReducer çš„ <code>state</code> åªæ˜¯ todos æœ¬èº«çš„æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è·Ÿè¸ª todos åˆ‡ç‰‡ä¸­çš„åŠ è½½çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦å°† todos çŠ¶æ€é‡æ–°ç»„ç»‡ä¸ºå…·æœ‰ todos æ•°ç»„ <em>å’Œ</em> åŠ è½½çŠ¶æ€å€¼çš„å¯¹è±¡ã€‚è¿™ä¹Ÿæ„å‘³ç€é‡å†™ reducer é€»è¾‘ä»¥å¤„ç†é¢å¤–çš„åµŒå¥—ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">todosReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color:#F8F8F2">=</span><span class="token parameter"> initialState</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoToggled&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!==</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// omit other cases</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit action creators</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodos</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¿™é‡Œæœ‰ä¸€äº›é‡è¦çš„äº‹æƒ…éœ€è¦æ³¨æ„ï¼š</p><ul><li>todos æ•°ç»„ç°åœ¨ä½œä¸º <code>state.entities</code> åµŒå¥—åœ¨ <code>todosReducer</code> çŠ¶æ€å¯¹è±¡ä¸­ã€‚&quot;entities&quot; è¿™ä¸ªè¯æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œæ„æ€æ˜¯â€œå…·æœ‰ ID çš„å”¯ä¸€é¡¹ç›®â€ï¼Œå®ƒç¡®å®æè¿°äº†æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹å¯¹è±¡ã€‚</li><li>è¿™ä¹Ÿæ„å‘³ç€æ•°ç»„åµŒå¥—åœ¨ <em>æ•´ä¸ª</em> Redux state å¯¹è±¡ä¸­ï¼Œä½œä¸º <code>state.todos.entities</code></li><li>æˆ‘ä»¬ç°åœ¨å¿…é¡»åœ¨ Reducer ä¸­æ‰§è¡Œé¢å¤–çš„æ­¥éª¤æ¥å¤åˆ¶é¢å¤–çš„åµŒå¥—çº§åˆ«ï¼Œä»¥è¿›è¡Œæ­£ç¡®çš„ä¸å¯å˜æ›´æ–°ï¼Œä¾‹å¦‚ <code>state</code> å¯¹è±¡ -&gt; <code>entities</code> æ•°ç»„ -&gt; <code>todo</code> å¯¹è±¡</li><li>ç”±äºä»£ç çš„å…¶ä½™éƒ¨åˆ†æ˜¯ <em>åª</em> é€šè¿‡é€‰æ‹©å™¨è®¿é—® todos çŠ¶æ€ï¼Œ<strong>æˆ‘ä»¬åªéœ€è¦æ›´æ–° <code>selectTodo</code> é€‰æ‹©å™¨</strong> - å³ä½¿æˆ‘ä»¬å¤§å¤§é‡å¡‘äº†çŠ¶æ€ï¼ŒUI çš„å…¶ä½™éƒ¨åˆ†ä»å°†ç»§ç»­æŒ‰é¢„æœŸå·¥ä½œã€‚</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="åŠ è½½çŠ¶æ€çš„æšä¸¾å€¼"></a>åŠ è½½çŠ¶æ€çš„æšä¸¾å€¼<a class="hash-link" href="#åŠ è½½çŠ¶æ€çš„æšä¸¾å€¼" title="Direct link to heading">#</a></h3><p>æ‚¨è¿˜ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬å·²å°†åŠ è½½çŠ¶æ€å­—æ®µå®šä¹‰ä¸ºå­—ç¬¦ä¸²æšä¸¾ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#c6cad2">// or: &#x27;loading&#x27;, &#x27;succeeded&#x27;, &#x27;failed&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è€Œä¸æ˜¯ <code>isLoading</code> å¸ƒå°”å€¼ã€‚</p><p>å¸ƒå°”å€¼å°†æˆ‘ä»¬é™åˆ¶åœ¨ä¸¤ç§å¯èƒ½æ€§ï¼šâ€œåŠ è½½â€æˆ–â€œä¸åŠ è½½â€ã€‚å®é™…ä¸Šï¼Œ<strong>è¯·æ±‚å®é™…ä¸Šå¯èƒ½å¤„äº <em>è®¸å¤š</em> ä¸åŒçš„çŠ¶æ€</strong>ï¼Œä¾‹å¦‚ï¼š</p><ul><li>æ ¹æœ¬æ²¡æœ‰å¼€å§‹</li><li>è¿›è¡Œä¸­</li><li>æˆåŠŸ</li><li>å¤±è´¥</li><li>æˆåŠŸ, ä½†åˆå›åˆ°äº†æˆ‘ä»¬å¯èƒ½æƒ³è¦é‡æ–°ç­›é€‰çš„æƒ…å†µ</li></ul><p>è¿˜æœ‰ä¸€ç§å¯èƒ½æ˜¯åº”ç”¨é€»è¾‘åº”ä»…æ ¹æ®æŸäº›æ“ä½œåœ¨ç‰¹å®šçŠ¶æ€ä¹‹é—´è½¬æ¢ï¼Œè¿™æ›´éš¾ä½¿ç”¨å¸ƒå°”å€¼å®ç°ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®® <strong>å°†åŠ è½½çŠ¶æ€å­˜å‚¨ä¸ºå­—ç¬¦ä¸²æšä¸¾å€¼ï¼Œè€Œä¸æ˜¯å¸ƒå°”æ ‡å¿—</strong>ã€‚</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>æœ‰å…³ä¸ºä»€ä¹ˆåŠ è½½çŠ¶æ€åº”ä¸ºæšä¸¾çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚é˜…ï¼š</p><ul><li><a href="/style-guide/style-guide#treat-reducers-as-state-machines">Redux Style Guide: treat reducers as state machines</a></li></ul></div></div><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªæ–°çš„ &quot;loading&quot; actionï¼Œè¯¥æ“ä½œä¼šå°†æˆ‘ä»¬çš„çŠ¶æ€è®¾ç½®ä¸º <code>&#x27;loading&#x27;</code>ï¼Œå¹¶æ›´æ–° &quot;loaded&quot; action ä»¥å°†çŠ¶æ€æ ‡å¿—é‡ç½® <code>&#x27;idle&#x27;</code>ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">todosReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color:#F8F8F2">=</span><span class="token parameter"> initialState</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// omit other cases</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoading&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoaded&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit action creators</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Thunk function</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">fetchTodos</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token parameter">dispatch</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todosLoading</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">get</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;/fakeApi/todos&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">todosLoaded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ä½†æ˜¯ï¼Œåœ¨æˆ‘ä»¬å°è¯•åœ¨ UI ä¸­æ˜¾ç¤ºè¿™ä¸€ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å‡æœåŠ¡å™¨ APIï¼Œä»¥å‘ API è°ƒç”¨æ·»åŠ äººä¸ºå»¶è¿Ÿã€‚æ‰“å¼€ <code>src/api/server.js</code>ï¼Œç„¶ååœ¨ç¬¬ 63 è¡Œå‘¨å›´æŸ¥æ‰¾æ­¤æ³¨é‡Šæ‰çš„è¡Œï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/api/server.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">new</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">routes</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">this</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">namespace</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;fakeApi&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// this.timing = 2000</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// omit other code</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>å¦‚æœæ‚¨å–æ¶ˆæ³¨é‡Šè¯¥è¡Œï¼Œå‡æœåŠ¡å™¨å°†ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè¿›è¡Œçš„æ¯ä¸ªAPIè°ƒç”¨æ·»åŠ 2ç§’çš„å»¶è¿Ÿï¼Œè¿™ä½¿æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´å®é™…çœ‹åˆ°æ­£åœ¨æ˜¾ç¤ºçš„åŠ è½½å¾®è°ƒå™¨ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å– <code>&lt;TodoList&gt;</code> ç»„ä»¶ä¸­çš„åŠ è½½çŠ¶æ€å€¼ï¼Œå¹¶æ ¹æ®è¯¥å€¼æ˜¾ç¤ºåŠ è½½å¾®è°ƒå™¨ã€‚</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/TodoList.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// omit imports</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#E6D874">TodoList</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todoIds </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectFilteredTodoIds</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> loadingStatus </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">loadingStatus </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;todo-list&quot;</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;loader&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">/</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token operator" style="color:#F8F8F2">/</span><span class="token plain">div</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> renderedListItems </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> todoIds</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todoId</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token maybe-class-name">TodoListItem</span><span class="token plain"> key</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> id</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">/</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">ul className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;todo-list&quot;</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">renderedListItems</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token operator" style="color:#F8F8F2">/</span><span class="token plain">ul</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›å¤„ç† API æ•…éšœé”™è¯¯å’Œå…¶ä»–æ½œåœ¨æƒ…å†µã€‚</p><p>ä»¥ä¸‹æ˜¯å¯ç”¨åŠ è½½çŠ¶æ€ååº”ç”¨çš„å¤–è§‚ï¼ˆè‹¥è¦å†æ¬¡æŸ¥çœ‹å¾®è°ƒå™¨ï¼Œè¯·é‡æ–°åŠ è½½åº”ç”¨é¢„è§ˆæˆ–åœ¨æ–°é€‰é¡¹å¡ï¼ˆtagï¼‰ä¸­æ‰“å¼€å®ƒï¼‰ï¼š</p><iframe class="codesandbox" src="https://codesandbox.io/embed/github/reduxjs/redux-fundamentals-example-app/tree/checkpoint-7-asyncLoading/?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;runonclick=1" title="redux-fundamentals-example-app" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="flux-standard-actions"></a>Flux Standard Actions<a class="hash-link" href="#flux-standard-actions" title="Direct link to heading">#</a></h2><p>Redux store æœ¬èº«å®é™…ä¸Šå¹¶ä¸å…³å¿ƒæ‚¨åœ¨ action ä¸­æ”¾å…¥äº†å“ªäº›å­—æ®µã€‚å®ƒåªå…³å¿ƒ <code>action.type</code> æ˜¯å¦å­˜åœ¨å¹¶å…·æœ‰å€¼ï¼Œå¹¶ä¸”å¸¸è§„çš„ Redux action å§‹ç»ˆä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º <code>action.type</code>ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å°†ä»»ä½•å…¶ä»–å­—æ®µæ”¾å…¥æ‰€éœ€çš„ action ä¸­ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥ç”¨ <code>action.todo</code> æ¥è¡¨ç¤º &quot;todo add&quot; åŠ¨ä½œï¼Œæˆ–è€… <code>action.color</code>ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ¯ä¸ª action å¯¹å…¶æ•°æ®å­—æ®µä½¿ç”¨ä¸åŒçš„å­—æ®µåç§°ï¼Œåˆ™å¾ˆéš¾æå‰çŸ¥é“æ¯ä¸ª reducer ä¸­éœ€è¦å¤„ç†å“ªäº›å­—æ®µã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Redux ç¤¾åŒºæå‡º<a href="https://github.com/redux-utilities/flux-standard-action#motivation" target="_blank" rel="noopener noreferrer">&quot;Flux Standard Actions&quot; çº¦å®š</a>, ç®€ç§° &quot;FSA&quot;ã€‚è¿™æ˜¯æœ‰å…³å¦‚ä½•åœ¨ action å¯¹è±¡å†…éƒ¨ç»„ç»‡å­—æ®µçš„å»ºè®®æ–¹æ³•ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å§‹ç»ˆçŸ¥é“å“ªäº›å­—æ®µåŒ…å«å“ªäº›ç±»å‹çš„æ•°æ®ã€‚FSA æ¨¡å¼åœ¨ Redux ç¤¾åŒºä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œäº‹å®ä¸Šï¼Œæ‚¨åœ¨æ•´ä¸ªæ•™ç¨‹ä¸­å·²ç»ä½¿ç”¨å®ƒã€‚</p><p>FSA çº¦å®šè¡¨è¾¾äº†ï¼š</p><ul><li>å¦‚æœæ‚¨çš„ action å¯¹è±¡å…·æœ‰ä»»ä½•å®é™…æ•°æ®ï¼Œåˆ™ action çš„â€œæ•°æ®â€å€¼åº”å§‹ç»ˆä½äº <code>action.payload</code> ä¸­</li><li>action è¿˜å¯ä»¥å…·æœ‰åŒ…å«é¢å¤–æè¿°æ€§æ•°æ®çš„ <code>action.meta</code> å­—æ®µ</li><li>action å¯èƒ½å…·æœ‰åŒ…å«é”™è¯¯ä¿¡æ¯çš„ <code>action.error</code> å­—æ®µ</li></ul><p>æ‰€ä»¥ï¼Œ<em>æ‰€æœ‰</em> Redux actions å¿…é¡»ï¼š</p><ul><li>æ˜¯ä¸€ä¸ªæ™®é€šçš„ JS å¯¹è±¡</li><li>å¿…é¡»æœ‰ <code>type</code> å­—æ®µ</li></ul><p>å¦‚æœæ‚¨ä½¿ç”¨ FSA æ¨¡å¼ç¼–å†™ actionï¼Œåˆ™ action å¯èƒ½ä¼š:</p><ul><li>æ‹¥æœ‰ä¸€ä¸ª <code>payload</code> å­—æ®µ</li><li>æ‹¥æœ‰ä¸€ä¸ª <code>error</code> å­—æ®µ</li><li>æ‹¥æœ‰ä¸€ä¸ª <code>meta</code> å­—æ®µ</li></ul><details class="detailed-explanation"><summary><h4>Detailed Explanation: FSAs and Errors</h4></summary><p>FSA è§„èŒƒè§„å®šï¼š</p><blockquote><p>å¦‚æœ action è¡¨ç¤ºé”™è¯¯ï¼Œåˆ™å¯é€‰çš„ <code>error</code> å±æ€§å¯ä»¥è®¾ç½®ä¸º <code>true</code>ã€‚
<code>error</code> ä¸ºçœŸçš„æ“ä½œç±»ä¼¼äº rejected Promiseã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œ<code>payload</code> åº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ã€‚
å¦‚æœ <code>error</code> é™¤ <code>true</code> ä¹‹å¤–è¿˜æœ‰ä»»ä½•å…¶ä»–å€¼ï¼ŒåŒ…æ‹¬ <code>undefined</code> å’Œ <code>null</code>ï¼Œåˆ™è¯¥action ä¸å¾—è§£é‡Šä¸ºé”™è¯¯ã€‚</p></blockquote><p>FSA è§„èŒƒè¿˜åå¯¹ä¸º &quot;loading succeeded&quot; å’Œ &quot;loading failed&quot; ç­‰å†…å®¹æä¾›ç‰¹å®šçš„ action ç±»å‹ã€‚</p><p>ç„¶è€Œï¼Œåœ¨å®è·µä¸­ï¼ŒRedux ç¤¾åŒºå¿½ç•¥äº†ä½¿ç”¨ <code>action.error</code> ä½œä¸ºå¸ƒå°”æ ‡å¿—çš„æƒ³æ³•ï¼Œè€Œæ˜¯é€‰æ‹©äº†å•ç‹¬çš„ action ç±»å‹ï¼Œå¦‚ <code>todos/todosLoadingSucceeded</code> å’Œ <code>todos/todosLoadingFailed</code>ã€‚è¿™æ˜¯å› ä¸ºæ£€æŸ¥è¿™äº› action ç±»å‹æ¯”é¦–å…ˆå¤„ç† <code>todos/todosLoaded</code> <em>å†</em> æ£€æŸ¥ <code>if ï¼ˆaction.errorï¼‰</code> è¦å®¹æ˜“å¾—å¤šã€‚</p><p>ä½ å¯ä»¥æ‰§è¡Œä»»ä½•ä¸€ç§æ›´é€‚åˆä½ çš„æ–¹æ³•ï¼Œä½†å¤§å¤šæ•°åº”ç”¨ä½¿ç”¨å•ç‹¬çš„ action ç±»å‹æ¥è¡¨ç¤ºæˆåŠŸå’Œå¤±è´¥ã€‚</p></details><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="è§„èŒƒåŒ–-state"></a>è§„èŒƒåŒ– State<a class="hash-link" href="#è§„èŒƒåŒ–-state" title="Direct link to heading">#</a></h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²å°†å¾…åŠäº‹é¡¹ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚è¿™æ˜¯åˆç†çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä»æœåŠ¡å™¨æ¥æ”¶æ•°æ®ä½œä¸ºæ•°ç»„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¾ªç¯è®¿é—®å¾…åŠäº‹é¡¹ä»¥åœ¨ UI ä¸­å°†å®ƒä»¬æ˜¾ç¤ºä¸ºåˆ—è¡¨ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨è¾ƒå¤§çš„ Redux åº”ç”¨ä¸­ï¼Œé€šå¸¸å°†æ•°æ®å­˜å‚¨åœ¨<strong>è§„èŒƒåŒ–çŠ¶æ€ç»“æ„</strong>ä¸­ã€‚â€œè§„èŒƒåŒ–â€æ˜¯æŒ‡ï¼š</p><ul><li>ç¡®ä¿æ¯æ¡æ•°æ®åªæœ‰ä¸€ä¸ªå‰¯æœ¬</li><li>ä»¥å…è®¸æŒ‰ ID ç›´æ¥æŸ¥æ‰¾é¡¹ç›®ï¼ˆitemsï¼‰çš„æ–¹å¼å­˜å‚¨é¡¹ç›®</li><li>åŸºäº ID å¼•ç”¨å…¶ä»–é¡¹ç›®ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•´ä¸ªé¡¹ç›®</li></ul><p>ä¾‹å¦‚ï¼Œåœ¨åšå®¢åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å¯èƒ½å…·æœ‰æŒ‡å‘ <code>User</code> å’Œ <code>Comment</code> å¯¹è±¡çš„ <code>Post</code>  å¯¹è±¡ã€‚åŒä¸€ä¸ªäººå¯èƒ½æœ‰å¾ˆå¤šå¸–å­ï¼Œå› æ­¤ï¼Œå¦‚æœæ¯ä¸ª <code>Post</code> å¯¹è±¡éƒ½åŒ…å«æ•´ä¸ª <code>User</code>ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰åŒä¸€ä¸ª <code>User</code> å¯¹è±¡çš„è®¸å¤šå‰¯æœ¬ã€‚ç›¸åï¼Œè‹¥ <code>Post</code> å¯¹è±¡çš„ç”¨æˆ· ID å€¼ä¸º <code>post.user</code>ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŒ‰ ID æŸ¥æ‰¾ <code>User</code> å¯¹è±¡ï¼Œå¦‚ <code>state.users[post.user]</code>ã€‚</p><p>è¿™æ„å‘³ç€æˆ‘ä»¬é€šå¸¸å°†æ•°æ®ç»„ç»‡ä¸ºå¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ï¼Œå…¶ä¸­é¡¹ç›® ID æ˜¯é”®ï¼Œé¡¹ç›®æœ¬èº«æ˜¯å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> rootState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">todos</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token number" style="color:#AE81FF">2</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">id</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">2</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">text</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Buy milk&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token boolean" style="color:#AE81FF">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token number" style="color:#AE81FF">7</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">id</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">7</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">text</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Clean room&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token boolean" style="color:#AE81FF">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è®©æˆ‘ä»¬è½¬æ¢ todos åˆ‡ç‰‡ï¼Œä»¥è§„èŒƒåŒ–çš„å½¢å¼å­˜å‚¨ todosã€‚è¿™å°†éœ€è¦å¯¹æˆ‘ä»¬çš„ reducer é€»è¾‘è¿›è¡Œä¸€äº›é‡å¤§æ›´æ”¹ï¼Œå¹¶æ›´æ–° selectorsï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/todos/todosSlice</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">todosReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color:#F8F8F2">=</span><span class="token parameter"> initialState</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoAdded&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todo </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> todo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoToggled&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todoId </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todo </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/colorSelected&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> color</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> todoId </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> todo </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">            color</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todoDeleted&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newEntities </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">delete</span><span class="token plain"> newEntities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> newEntities</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/allCompleted&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newEntities </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">values</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">newEntities</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">forEach</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        newEntities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token boolean" style="color:#AE81FF">true</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> newEntities</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/completedCleared&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newEntities </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">values</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">newEntities</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">forEach</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword" style="color:#F92672">delete</span><span class="token plain"> newEntities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> newEntities</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoading&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/todosLoaded&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newEntities </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">forEach</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        newEntities</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> todo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">entities</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> newEntities</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// omit action creators</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodoEntities</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">entities</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> selectTodos </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectTodoEntities</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token parameter">entities</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">values</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">entities</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectTodoById</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> todoId</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">selectTodoEntities</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ç”±äºæˆ‘ä»¬çš„ <code>state.entities</code> å­—æ®µç°åœ¨æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä½¿ç”¨åµŒå¥—å¯¹è±¡å±•å¼€è¿ç®—ç¬¦æ¥æ›´æ–°æ•°æ®è€Œä¸æ˜¯æ•°ç»„æ“ä½œã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸èƒ½åƒå¾ªç¯æ•°ç»„é‚£æ ·å¾ªç¯è®¿é—®å¯¹è±¡ï¼Œå› æ­¤åœ¨å‡ ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ <code>Object.valuesï¼ˆentities</code> æ¥è·å–å¾…åŠäº‹é¡¹çš„æ•°ç»„ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å¾ªç¯è®¿é—®å®ƒä»¬ã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨ selectors æ¥å°è£…çŠ¶æ€æŸ¥æ‰¾ï¼Œå› æ­¤æˆ‘ä»¬çš„ UI ä»ç„¶ä¸å¿…æ›´æ”¹ã€‚åæ¶ˆæ¯æ˜¯ï¼Œreducer ä»£ç å®é™…ä¸Šæ›´é•¿ï¼Œæ›´å¤æ‚ã€‚</p><p>è¿™é‡Œçš„éƒ¨åˆ†é—®é¢˜æ˜¯<strong>æ­¤å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºç¤ºä¾‹ä¸æ˜¯å¤§å‹å®é™…åº”ç”¨ç¨‹åº</strong>ã€‚å› æ­¤ï¼Œè§„èŒƒåŒ–çŠ¶æ€åœ¨æ­¤ç‰¹å®šåº”ç”¨ä¸­æ²¡æœ‰é‚£ä¹ˆæœ‰ç”¨ï¼Œå¹¶ä¸”æ›´éš¾çœ‹åˆ°æ½œåœ¨çš„å¥½å¤„ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨<a href="/tutorials/fundamentals/part-8-modern-redux">ç¬¬ 8 èŠ‚ï¼šåŸºäº Redux Toolkit çš„ç°ä»£åŒ– Redux</a>ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€äº›æ–¹æ³•æ¥å¤§å¤§ç¼©çŸ­ç”¨äºç®¡ç†è§„èŒƒåŒ–çŠ¶æ€çš„ reducer é€»è¾‘ã€‚</p><p>ç›®å‰ï¼Œè¦äº†è§£çš„é‡è¦äº‹é¡¹æ˜¯ï¼š</p><ul><li>è§„èŒƒåŒ–åœ¨ Redux åº”ç”¨ä¸­ <em>å¾ˆ</em> å¸¸ç”¨</li><li>ä¸»è¦å¥½å¤„æ˜¯èƒ½å¤Ÿé€šè¿‡ ID æŸ¥æ‰¾å•ä¸ªé¡¹ç›®ï¼Œå¹¶ç¡®ä¿ state ä¸­åªå­˜åœ¨é¡¹ç›®çš„ä¸€ä¸ªå‰¯æœ¬</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>æœ‰å…³è§„èŒƒåŒ–å¯¹ Redux æœ‰ç”¨çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š</p><ul><li><a href="/recipes/structuring-reducers/normalizing-state-shape">Structuring Reducers: Normalizing State Shape</a></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="thunks-å’Œ-promises"></a>Thunks å’Œ Promises<a class="hash-link" href="#thunks-å’Œ-promises" title="Direct link to heading">#</a></h2><p>å¯¹äºæœ¬èŠ‚ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä¸ªæ¨¡å¼è¦çœ‹ã€‚æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•åŸºäº dispatch action åœ¨ Redux store ä¸­å¤„ç†åŠ è½½çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ç»„ä»¶ thunk çš„ç»“æœï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>æ¯å½“æ‚¨è°ƒç”¨ <code>store.dispatch(action)</code> æ—¶ï¼Œ<code>dispatch</code> å®é™…ä¸Šä¼šè¿”å› <code>action</code> ä½œä¸ºå…¶ç»“æœã€‚ç„¶åï¼Œä¸­é—´ä»¶å¯ä»¥ä¿®æ”¹è¯¥è¡Œä¸ºå¹¶è¿”å›ä¸€äº›å…¶ä»–å€¼ã€‚</p><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼ŒRedux Thunk ä¸­é—´ä»¶å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™ <code>dispatch</code>ï¼Œè°ƒç”¨è¯¥å‡½æ•°ï¼Œç„¶åè¿”å›ç»“æœï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">reduxThunkMiddleware.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">reduxThunkMiddleware</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">storeAPI</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token parameter">next</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token parameter">action</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// If the &quot;action&quot; is actually a function instead...</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> action </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;function&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// then call the function and pass `dispatch` and `getState` as arguments</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// Also, return whatever the thunk function returns</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">action</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">storeAPI</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">dispatch</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> storeAPI</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Otherwise, it&#x27;s a normal action - send it onwards</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">next</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>è¿™æ„å‘³ç€<strong>æˆ‘ä»¬å¯ä»¥ç¼–å†™è¿”å› promise çš„ thunk å‡½æ•°ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­ç­‰å¾… promise çŠ¶æ€å˜åŒ–</strong>ã€‚</p><p>æˆ‘ä»¬å·²ç»æœ‰ <code>&lt;Header&gt;</code> ç»„ä»¶ dispatching ä¸€ä¸ª thunkï¼Œä»¥å°†æ–°çš„å¾…åŠäº‹é¡¹æ¡ç›®ä¿å­˜åˆ°æœåŠ¡å™¨ã€‚è®©æˆ‘ä»¬åœ¨ <code>&lt;Header&gt;</code> ç»„ä»¶ä¸­æ·»åŠ ä¸€äº›åŠ è½½çŠ¶æ€ï¼Œç„¶åç¦ç”¨æ–‡æœ¬è¾“å…¥ï¼Œå¹¶åœ¨ç­‰å¾…æœåŠ¡å™¨æ—¶æ˜¾ç¤ºå¦ä¸€ä¸ªåŠ è½½å¾®è°ƒå™¨ï¼š</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">src/features/header/Header.js</div><div class="codeBlockContent_csEI js"><div tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#E6D874">Header</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">text</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> setText</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">status</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> setStatus</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">handleChange</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">setText</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">handleKeyDown</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// If the user pressed the Enter key:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> trimmedText </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> text</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">trim</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">which</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">13</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&amp;&amp;</span><span class="token plain"> trimmedText</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// Create and dispatch the thunk function itself</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">setStatus</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// Wait for the promise returned by saveNewTodo</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">saveNewTodo</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">trimmedText</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// And clear out the text input</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">setText</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">setStatus</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">let</span><span class="token plain"> isLoading </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> status </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">let</span><span class="token plain"> placeholder </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> isLoading </span><span class="token operator" style="color:#F8F8F2">?</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;What needs to be done?&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">let</span><span class="token plain"> loader </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> isLoading </span><span class="token operator" style="color:#F8F8F2">?</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;loader&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">/</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">header className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;header&quot;</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">input</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        className</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token string" style="color:#a6e22e">&quot;new-todo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        placeholder</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">placeholder</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        autoFocus</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token boolean" style="color:#AE81FF">true</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        value</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">text</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        onChange</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">handleChange</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        onKeyDown</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">handleKeyDown</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        disabled</span><span class="token operator" style="color:#F8F8F2">=</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token operator" style="color:#F8F8F2">/</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">loader</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token operator" style="color:#F8F8F2">/</span><span class="token plain">header</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¾…åŠäº‹é¡¹ï¼Œæˆ‘ä»¬å°†åœ¨æ ‡é¢˜ä¸­çœ‹åˆ°ä¸€ä¸ªå¾®è°ƒå™¨ï¼š</p><p><img alt="Todo app - component loading spinner" src="/assets/images/todos-app-headerLoading-9b4bca9cb4675bf35df09a2e709ecccb.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ä½ å­¦åˆ°äº†"></a>ä½ å­¦åˆ°äº†<a class="hash-link" href="#ä½ å­¦åˆ°äº†" title="Direct link to heading">#</a></h2><p>å¦‚æ‚¨æ‰€è§ï¼Œè¿˜æœ‰å‡ ç§åœ¨ Redux åº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨çš„å…¶ä»–æ¨¡å¼ã€‚è¿™äº›æ¨¡å¼ä¸æ˜¯å¿…éœ€çš„ï¼Œæœ€åˆå¯èƒ½æ¶‰åŠç¼–å†™æ›´å¤šä»£ç ï¼Œä½†å®ƒä»¬æä¾›äº†ä¸€äº›å¥½å¤„ï¼Œä¾‹å¦‚ä½¿é€»è¾‘å¯é‡ç”¨ã€å°è£…å®ç°ç»†èŠ‚ã€æé«˜åº”ç”¨æ€§èƒ½ä»¥åŠä½¿æŸ¥æ‰¾æ•°æ®æ›´å®¹æ˜“ã€‚</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>æœ‰å…³è¿™äº›æ¨¡å¼å­˜åœ¨çš„åŸå› ä»¥åŠå¦‚ä½•ä½¿ç”¨Reduxçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š</p><ul><li><a href="https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-1/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: The Tao of Redux, Part 1 - Implementation and Intent</a></li><li><a href="https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: The Tao of Redux, Part 2 - Practice and Philosophy</a></li></ul></div></div><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„åº”ç”¨åœ¨å®Œå…¨è½¬æ¢ä¸ºä½¿ç”¨è¿™äº›æ¨¡å¼åçš„æ ·å­ï¼š</p><iframe class="codesandbox" src="https://codesandbox.io/embed/github/reduxjs/redux-fundamentals-example-app/tree/checkpoint-8-normalizedState/?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;runonclick=1" title="redux-fundamentals-example-app" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><ul><li><strong>Action creators å‡½æ•°å¯ä»¥å°è£…å…³äº action å¯¹è±¡å’Œ thunks çš„é€»è¾‘</strong><ul><li>Action creators å¯ä»¥æ¥å—å‚æ•°å¹¶åŒ…å«è®¾ç½®é€»è¾‘ï¼Œå¹¶è¿”å›æœ€ç»ˆçš„ action å¯¹è±¡æˆ– thunk å‡½æ•°</li></ul></li><li><strong>è®°å¿†åŒ– selectors æœ‰åŠ©äºæé«˜ Redux åº”ç”¨æ€§èƒ½</strong><ul><li>Reselect æœ‰ä¸€ä¸ª <code>createSelector</code> API å¯ä»¥ç”Ÿæˆè®°å¿†åŒ– selectors</li><li>å¦‚æœç»™è®°å¿†åŒ– selectors ä¼ å…¥ç›¸åŒçš„å‚æ•°ï¼Œå°†è¿”å›ç›¸åŒçš„ç»“æœï¼ˆå¼•ç”¨ï¼‰</li></ul></li><li><strong>è¯·æ±‚çŠ¶æ€åº”å­˜å‚¨ä¸ºæšä¸¾å€¼ï¼Œè€Œä¸æ˜¯å¸ƒå°”å€¼</strong><ul><li>ä½¿ç”¨ <code>&#x27;idle&#x27;</code> å’Œ <code>&#x27;loading&#x27;</code> ç­‰æšä¸¾æœ‰åŠ©äºä¸€è‡´åœ°è·Ÿè¸ªçŠ¶æ€</li></ul></li><li><strong>&quot;Flux Standard Actions&quot; æ˜¯ç®¡ç† action å¯¹è±¡å…¬è®¤çš„çº¦å®š</strong><ul><li>Actions çš„æ•°æ®æ”¾åœ¨ <code>payload</code> å­—æ®µé‡Œï¼Œ<code>meta</code> æ”¾é¢å¤–çš„æè¿°ï¼Œ<code>error</code> æ”¾é”™è¯¯ä¿¡æ¯</li></ul></li><li><strong>è§„èŒƒåŒ–çŠ¶æ€ä½¿æŒ‰ ID æŸ¥æ‰¾é¡¹ç›®å˜å¾—æ›´åŠ å®¹æ˜“</strong><ul><li>è§„èŒƒåŒ–æ•°æ®å­˜å‚¨åœ¨å¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ä¸­ï¼Œé¡¹ç›® ID ä½œä¸ºé”®</li></ul></li><li><strong>Thunks å¯ä»¥ä» <code>dispatch</code> ä¸­è¿”å› promise å€¼</strong><ul><li>ç»„ä»¶å†…å¯ä»¥ç­‰å¾…å¼‚æ­¥ thunks å®Œæˆï¼Œç„¶ååšæ›´å¤šçš„å·¥ä½œ</li></ul></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥<a class="hash-link" href="#ä¸‹ä¸€æ­¥" title="Direct link to heading">#</a></h2><p>â€œæ‰‹åŠ¨â€ç¼–å†™æ‰€æœ‰è¿™äº›ä»£ç å¯èƒ½æ—¢è€—æ—¶åˆå›°éš¾ã€‚<strong>è¿™å°±æ˜¯æˆ‘ä»¬æ¨èä½ ç”¨å®˜æ–¹åº“ <a href="https://redux-toolkit.js.org" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> å»å†™ Redux é€»è¾‘çš„åŸå› </strong>ã€‚</p><p>Redux Toolkit åŒ…å«çš„ API å¯<strong>å¸®åŠ©æ‚¨ç¼–å†™æ‰€æœ‰å…¸å‹çš„ Redux ä½¿ç”¨æ¨¡å¼ï¼Œä¸”ä»£ç è¾ƒå°‘</strong>ã€‚å®ƒè¿˜æœ‰åŠ©äº<strong>é˜²æ­¢å¸¸è§é”™è¯¯</strong>ï¼Œä¾‹å¦‚æ„å¤–æ”¹å˜çŠ¶æ€ã€‚</p><p>åœ¨<a href="/tutorials/fundamentals/part-8-modern-redux">ç¬¬ 8 èŠ‚: ç°ä»£åŒ– Redux</a>, æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Redux Toolkit æ¥ç®€åŒ–æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢ç¼–å†™çš„æ‰€æœ‰ä»£ç ã€‚</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tutorials/fundamentals/part-6-async-logic"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Redux Fundamentals, Part 6: Async Logic and Data Fetching</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tutorials/fundamentals/part-8-modern-redux"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redux Fundamentals, Part 8: Modern Redux with Redux Toolkit Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action-creators" class="table-of-contents__link">Action Creators</a><ul><li><a href="#using-action-creators" class="table-of-contents__link">Using Action Creators</a></li></ul></li><li><a href="#è®°å¿†åŒ–-selectors" class="table-of-contents__link">è®°å¿†åŒ– Selectors</a><ul><li><a href="#ç»“åˆ-createselector-è®°å¿†åŒ–-selectors" class="table-of-contents__link">ç»“åˆ <code>createSelector</code> è®°å¿†åŒ– Selectors</a></li><li><a href="#å…·æœ‰å¤šä¸ªå‚æ•°çš„-selectors" class="table-of-contents__link">å…·æœ‰å¤šä¸ªå‚æ•°çš„ Selectors</a></li></ul></li><li><a href="#å¼‚æ­¥è¯·æ±‚çŠ¶æ€" class="table-of-contents__link">å¼‚æ­¥è¯·æ±‚çŠ¶æ€</a><ul><li><a href="#åŠ è½½çŠ¶æ€çš„æšä¸¾å€¼" class="table-of-contents__link">åŠ è½½çŠ¶æ€çš„æšä¸¾å€¼</a></li></ul></li><li><a href="#flux-standard-actions" class="table-of-contents__link">Flux Standard Actions</a></li><li><a href="#è§„èŒƒåŒ–-state" class="table-of-contents__link">è§„èŒƒåŒ– State</a></li><li><a href="#thunks-å’Œ-promises" class="table-of-contents__link">Thunks å’Œ Promises</a></li><li><a href="#ä½ å­¦åˆ°äº†" class="table-of-contents__link">ä½ å­¦åˆ°äº†</a></li><li><a href="#ä¸‹ä¸€æ­¥" class="table-of-contents__link">ä¸‹ä¸€æ­¥</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started">å…¥é—¨</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">å¸¸è§é—®é¢˜</a></li><li class="footer__item"><a class="footer__link-item" href="/api/api-reference">API æ–‡æ¡£</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord</a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2015â€“2022 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9044bd3c.js"></script>
<script src="/assets/js/main.983ddc03.js"></script>
</body>
</html>