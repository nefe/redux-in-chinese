<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Redux ä¸­æ–‡å®˜ç½‘ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Redux ä¸­æ–‡å®˜ç½‘ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux ä¸­æ–‡å®˜ç½‘" href="/opensearch.xml"><title data-react-helmet="true">Redux åŸºç¡€ï¼Œç¬¬äºŒèŠ‚ï¼šåº”ç”¨çš„ç»“æ„ | Redux ä¸­æ–‡å®˜ç½‘</title><meta data-react-helmet="true" property="og:url" content="http://cn.redux.js.org/tutorials/essentials/part-2-app-structure"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Redux åŸºç¡€ï¼Œç¬¬äºŒèŠ‚ï¼šåº”ç”¨çš„ç»“æ„ | Redux ä¸­æ–‡å®˜ç½‘"><meta data-react-helmet="true" name="description" content="The official Redux Essentials tutorial: learn the structure of a typical React + Redux app"><meta data-react-helmet="true" property="og:description" content="The official Redux Essentials tutorial: learn the structure of a typical React + Redux app"><meta data-react-helmet="true" property="og:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://cn.redux.js.org/tutorials/essentials/part-2-app-structure"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/tutorials/essentials/part-2-app-structure" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/tutorials/essentials/part-2-app-structure" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.01e0d58b.css">
<link rel="preload" href="/assets/js/runtime~main.2c006b44.js" as="script">
<link rel="preload" href="/assets/js/main.791b6a23.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Redux ä¸­æ–‡å®˜ç½‘</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction/getting-started">å…¥é—¨</a><a class="navbar__item navbar__link" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a><a class="navbar__item navbar__link" href="/api/api-reference">API</a><a class="navbar__item navbar__link" href="/faq">å¸¸è§é—®é¢˜</a><a class="navbar__item navbar__link" href="/style-guide/style-guide">æœ€ä½³å®è·µ</a><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æºç </a><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">çº é”™</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Redux ä¸­æ–‡å®˜ç½‘</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction/getting-started">å…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" href="/api/api-reference">API</a></li><li class="menu__list-item"><a class="menu__link" href="/faq">å¸¸è§é—®é¢˜</a></li><li class="menu__list-item"><a class="menu__link" href="/style-guide/style-guide">æœ€ä½³å®è·µ</a></li><li class="menu__list-item"><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="menu__link">æºç </a></li><li class="menu__list-item"><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="menu__link">çº é”™</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ç®€ä»‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/getting-started">å…¥é—¨ Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/installation">å®‰è£…</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/core-concepts">æ ¸å¿ƒæ¦‚å¿µ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/learning-resources">å­¦ä¹ èµ„æº</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/ecosystem">ç”Ÿæ€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/examples">ç¤ºä¾‹</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">æ•™ç¨‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/index">æ•™ç¨‹ç›®å½•</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Redux å¾ªåºæ¸è¿›</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/essentials/part-1-overview-concepts">åŸºç¡€æ¦‚å¿µ</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/tutorials/essentials/part-2-app-structure">åº”ç”¨ç»“æ„</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/essentials/part-3-data-flow">æ•°æ®æµåŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/essentials/part-4-using-data">ä½¿ç”¨æ•°æ®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/essentials/part-5-async-logic">å¼‚æ­¥é€»è¾‘ä¸æ•°æ®è¯·æ±‚</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/essentials/part-6-performance-normalization">æ€§èƒ½ä¸æ•°æ®èŒƒå¼åŒ–</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redux æ·±å…¥æµ…å‡º</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-1-overview">Redux Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-2-concepts-data-flow">Redux Concepts and Data Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-3-state-actions-reducers">State, Actions, and Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-4-store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-5-ui-react">UI and React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-6-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-7-standard-patterns">Standard Redux Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-8-modern-redux">Modern Redux with Redux Toolkit</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">æŠ€å·§</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/recipe-index">Recipes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/configuring-your-store">Configuring Your Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/usage-with-typescript">Usage with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/migrating-to-redux">Migrating to Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/using-object-spread-operator">Using Object Spread Operator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/reducing-boilerplate">Reducing Boilerplate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/server-rendering">Server Rendering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/writing-tests">Writing Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/computing-derived-data">Computing Derived Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/implementing-undo-history">Implementing Undo History</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/isolating-redux-sub-apps">Isolating Redux Sub-Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/code-splitting">Code Splitting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/troubleshooting">Troubleshooting</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ç»„ç»‡ Reducers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/structuring-reducers">Structuring Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/prerequisite-concepts">Prerequisite Reducer Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/basic-reducer-structure">Basic Reducer Structure and State Shape</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/splitting-reducer-logic">Splitting Up Reducer Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/refactoring-reducer-example">Refactoring Reducer Logic Using Functional Decomposition and Reducer Composition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/using-combinereducers">Using `combineReducers`</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/beyond-combinereducers">Beyond `combineReducers`</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/normalizing-state-shape">Normalizing State Shape</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/updating-normalized-data">Managing Normalized Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/reusing-reducer-logic">Reusing Reducer Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/immutable-update-patterns">Immutable Update Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/initializing-state">Initializing State</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">æ·±å…¥ç†è§£ Redux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">åƒ Redux ä¸€æ ·æ€è€ƒ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/motivation">åŠ¨æœº</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/three-principles">ä¸‰å¤§åŸåˆ™</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/glossary">è¯æ±‡è¡¨</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">å†å²ä¸è®¾è®¡åŸåˆ™</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/prior-art">å…ˆå‰æŠ€æœ¯</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/middleware">Middleware</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">å¸¸è§é—®é¢˜</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq">Redux FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/general">Redux FAQ: General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/reducers">Redux FAQ: Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/organizing-state">Redux FAQ: Organizing State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/store-setup">Redux FAQ: Store Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/actions">Redux FAQ: Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/immutable-data">Redux FAQ: Immutable Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/code-structure">Redux FAQ: Code Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/performance">Redux FAQ: Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/design-decisions">Redux FAQ: Design Decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/react-redux">Redux FAQ: React Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/miscellaneous">Redux FAQ: Miscellaneous</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ç¼–ç è§„èŒƒ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/style-guide/style-guide">Style Guide: Best Practices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API æ–‡æ¡£</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/createstore">createStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/combinereducers">combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/applymiddleware">applyMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/bindactioncreators">bindActionCreators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/compose">compose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/overview">Redux Toolkit: æ¦‚è§ˆ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">ç¬¬äºŒèŠ‚ï¼šåº”ç”¨çš„ç»“æ„</h1></header><div class="markdown"><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>ä½ å°†å­¦åˆ°</h5></div><div class="admonition-content"><ul><li>ä¸€ä¸ªå…¸å‹çš„ React + Redux åº”ç”¨ç¨‹åºçš„ç»“æ„</li><li>å¦‚ä½•åœ¨ Redux DevTools Extension ä¸­æŸ¥çœ‹çŠ¶æ€å˜åŒ–</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç®€ä»‹"></a>ç®€ä»‹<a class="hash-link" href="#ç®€ä»‹" title="Direct link to heading">#</a></h2><p>åœ¨ <a href="/tutorials/essentials/part-1-overview-concepts">ç¬¬ä¸€èŠ‚ï¼šRedux æ¦‚è¿°å’Œæ¦‚å¿µ</a> ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº† Redux ä¸ºä½•æœ‰ç”¨ã€ç”¨äºæè¿° Redux ä»£ç ä¸åŒéƒ¨åˆ†çš„æœ¯è¯­å’Œæ¦‚å¿µï¼Œä»¥åŠæ•°æ®å¦‚ä½•åœ¨ Redux åº”ç”¨ç¨‹åºä¸­æµåŠ¨ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçœŸå®çš„å·¥ä½œç¤ºä¾‹ï¼Œçœ‹çœ‹è¿™äº›éƒ¨åˆ†æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è®¡æ•°å™¨ç¤ºä¾‹åº”ç”¨ç¨‹åº"></a>è®¡æ•°å™¨ç¤ºä¾‹åº”ç”¨ç¨‹åº<a class="hash-link" href="#è®¡æ•°å™¨ç¤ºä¾‹åº”ç”¨ç¨‹åº" title="Direct link to heading">#</a></h2><p>æˆ‘ä»¬å°†çœ‹åˆ°çš„ç¤ºä¾‹é¡¹ç›®æ˜¯ä¸€ä¸ªå°å‹è®¡æ•°å™¨åº”ç”¨ç¨‹åºï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨å•å‡»æŒ‰é’®æ—¶å¯¹æ•°å­—è¿›è¡ŒåŠ å‡è¿ç®—ã€‚å®ƒå¯èƒ½ä¸æ˜¯å¾ˆä»¤äººå…´å¥‹ï¼Œä½†å®ƒå±•ç¤ºäº†ä¸€ä¸ª React + Redux åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é‡è¦éƒ¨åˆ†ã€‚</p><p>æœ¬é¡¹ç›®ä½¿ç”¨ <a href="https://github.com/reduxjs/cra-template-redux" target="_blank" rel="noopener noreferrer">Create-React-App çš„å®˜æ–¹ Redux æ¨¡æ¿</a> åˆ›å»ºã€‚å¼€ç®±å³ç”¨ï¼Œå®ƒå·²ç»é…ç½®äº†æ ‡å‡†çš„ Redux åº”ç”¨ç¨‹åºç»“æ„ï¼Œä½¿ç”¨ <a href="https://redux-toolkit.js.org" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> åˆ›å»º Redux å­˜å‚¨å’Œé€»è¾‘ï¼Œä»¥åŠ <a href="https://react-redux.js.org" target="_blank" rel="noopener noreferrer">React-Redux</a> å°† Redux å­˜å‚¨å’Œ React ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p>è¿™æ˜¯è¯¥é¡¹ç›®çš„å®æ—¶ç‰ˆæœ¬ã€‚ æ‚¨å¯ä»¥é€šè¿‡å•å‡»å³ä¾§åº”ç”¨ç¨‹åºé¢„è§ˆä¸­çš„æŒ‰é’®æ¥è¯•ç”¨å®ƒï¼Œå¹¶æµè§ˆå·¦ä¾§çš„æºæ–‡ä»¶ã€‚</p><iframe class="codesandbox" src="https://codesandbox.io/embed/github/reduxjs/redux-essentials-counter-example/tree/master/?fontsize=14&amp;hidenavigation=1&amp;module=%2Fsrc%2Ffeatures%2Fcounter%2FcounterSlice.js&amp;theme=dark&amp;runonclick=1" title="redux-essentials-example" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><p>å¦‚æœä½ æƒ³å°è¯•åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šåˆ›å»ºè¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥[å¼€å§‹ä¸€ä¸ªæ–°çš„ Create-React-App é¡¹ç›®](<a href="https://create-react-app.dev/docs/getting-started#selecting-a" target="_blank" rel="noopener noreferrer">https://create-react-app.dev/docs/getting-started#selecting-a</a> -template) ä½¿ç”¨æˆ‘ä»¬çš„ Redux æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token plain">npx create-react-app redux-essentials-example --template redux</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä½¿ç”¨è®¡æ•°å™¨åº”ç”¨ç¨‹åº"></a>ä½¿ç”¨è®¡æ•°å™¨åº”ç”¨ç¨‹åº<a class="hash-link" href="#ä½¿ç”¨è®¡æ•°å™¨åº”ç”¨ç¨‹åº" title="Direct link to heading">#</a></h3><p>è®¡æ•°å™¨åº”ç”¨ç¨‹åºå·²ç»è®¾ç½®å¥½ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨æ—¶è§‚å¯Ÿå†…éƒ¨å‘ç”Ÿçš„æƒ…å†µã€‚</p><p>æ‰“å¼€æµè§ˆå™¨çš„ DevToolsã€‚ ç„¶åï¼Œåœ¨ DevTools ä¸­é€‰æ‹©â€œReduxâ€é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å³ä¸Šè§’å·¥å…·æ ä¸­çš„â€œStateâ€æŒ‰é’®ã€‚ æ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å†…å®¹ï¼š</p><p><img alt="Redux DevTools: initial app state" src="/assets/images/devtools-initial-3b52cedcebd74c327ee3b9b2342d69db.png"></p><p>åœ¨å³ä¾§ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ Redux Store çš„åˆå§‹ state æ˜¯è¿™æ ·ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  counter</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>DevTools å°†å‘æˆ‘ä»¬å±•ç¤º Store ä¸­çš„ state æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚</p><p>è®©æˆ‘ä»¬å…ˆç©ä¸€ä¸‹è¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œçœ‹çœ‹å®ƒæœ‰ä»€ä¹ˆä½œç”¨ã€‚å•å‡»åº”ç”¨ç¨‹åºä¸­çš„â€œ+â€æŒ‰é’®ï¼Œç„¶åæŸ¥çœ‹ Redux DevTools ä¸­çš„â€œDiffâ€é€‰é¡¹å¡ï¼š</p><p><img alt="Redux DevTools: first dispatched action" src="/assets/images/devtools-first-action-c9d4378ec1ec3e1c8f93b1e8e4a1d033.png"></p><p>æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä¸¤ä¸ªé‡è¦çš„äº‹æƒ…ï¼š</p><ul><li>å½“æˆ‘ä»¬ç‚¹å‡»â€œ+â€æŒ‰é’®æ—¶ï¼Œä¸€ä¸ª type ä¸ºâ€œcounter/incrementâ€çš„ action è¢« dispatch åˆ° store</li><li>dispatch action åï¼Œ<code>state.counter.value</code> å­—æ®µå¼€å§‹ä» <code>0</code> æ”¹åˆ° <code>1</code></li></ul><p>ç°åœ¨å°è¯•ä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>å†æ¬¡å•å‡»â€œ+â€æŒ‰é’®ã€‚æ˜¾ç¤ºçš„å€¼ç°åœ¨åº”è¯¥æ˜¯ 2ã€‚</li><li>å•å‡»â€œ-â€æŒ‰é’®ä¸€æ¬¡ã€‚æ˜¾ç¤ºçš„å€¼ç°åœ¨åº”è¯¥æ˜¯ 1ã€‚</li><li>å•å‡»â€œæ·»åŠ é‡‘é¢â€æŒ‰é’®ã€‚æ˜¾ç¤ºçš„å€¼ç°åœ¨åº”è¯¥æ˜¯ 3ã€‚</li><li>å°†æ–‡æœ¬æ¡†ä¸­çš„æ•°å­—â€œ2â€æ›´æ”¹ä¸ºâ€œ3â€</li><li>å•å‡»â€œæ·»åŠ å¼‚æ­¥â€æŒ‰é’®ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªè¿›åº¦æ¡å¡«å……æŒ‰é’®ï¼Œå‡ ç§’é’Ÿåï¼Œæ˜¾ç¤ºçš„å€¼åº”æ›´æ”¹ä¸º 6ã€‚</li></ul><p>å›åˆ° Redux DevToolsã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ€»å…± dispatch äº†äº”ä¸ª actionï¼Œæ¯å•å‡»ä¸€ä¸ªæŒ‰é’®è§¦å‘ä¸€æ¬¡ã€‚ç°åœ¨ä»å·¦ä¾§åˆ—è¡¨ä¸­é€‰æ‹©æœ€åä¸€ä¸ª <code>&quot;counter/incrementByAmount&quot;</code> æ¡ç›®ï¼Œç„¶åå•å‡»å³ä¾§çš„ &quot;Action&quot; é€‰é¡¹å¡ï¼š</p><p><img alt="Redux DevTools: done clicking buttons" src="/assets/images/devtools-done-clicking-8826e622b87734ea2a0044233a2a642f.png"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª action å¯¹è±¡æ˜¯è¿™æ ·çš„ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;counter/incrementByAmount&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">3</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚æœæ‚¨å•å‡»â€œå·®å¼‚â€é€‰é¡¹å¡ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° <code>state.counter.value</code> å­—æ®µå“åº”è¯¥ action ä» <code>3</code> æ›´æ”¹ä¸º <code>6</code>ã€‚</p><p>æŸ¥çœ‹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå†…éƒ¨å‘ç”Ÿçš„äº‹æƒ…ä»¥åŠæˆ‘ä»¬çš„çŠ¶æ€å¦‚ä½•éšæ—¶é—´å˜åŒ–çš„èƒ½åŠ›éå¸¸å¼ºå¤§ï¼</p><p>DevTools æœ‰æ›´å¤šå‘½ä»¤å’Œé€‰é¡¹å¯å¸®åŠ©æ‚¨è°ƒè¯•åº”ç”¨ç¨‹åºã€‚å°è¯•å•å‡»å³ä¸Šè§’çš„â€œè·Ÿè¸ª Traceâ€é€‰é¡¹å¡ã€‚ æ‚¨åº”è¯¥åœ¨é¢æ¿ä¸­çœ‹åˆ°ä¸€ä¸ª JavaScript å‡½æ•°å †æ ˆè·Ÿè¸ªï¼Œå…¶ä¸­æœ‰å‡ æ®µæºä»£ç æ˜¾ç¤ºäº†å½“ action åˆ°è¾¾ store æ—¶æ­£åœ¨æ‰§è¡Œçš„è¡Œã€‚ç‰¹åˆ«åº”è¯¥çªå‡ºæ˜¾ç¤ºä¸€è¡Œï¼šæˆ‘ä»¬ä» <code>&lt;Counter&gt;</code> ç»„ä»¶ dispatch æ­¤ action çš„ä»£ç è¡Œï¼š</p><p><img alt="Redux DevTools: action stack traces" src="/assets/images/devtools-action-stacktrace-8ee180838c97840a749b9209e80c8a72.png"></p><p>è¿™ä½¿å¾—è·Ÿè¸ªä»£ç çš„å“ªä¸€éƒ¨åˆ† dispatch äº†ç‰¹å®š action å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="application-å®ç°"></a>Application å®ç°<a class="hash-link" href="#application-å®ç°" title="Direct link to heading">#</a></h2><p>ä½ å·²ç»çŸ¥é“äº†åº”ç”¨çš„åŠŸèƒ½ï¼Œç°åœ¨çœ‹ä¸€ä¸‹ä»£ç å®ç°ã€‚</p><p>ä»¥ä¸‹æ˜¯æ„æˆæ­¤åº”ç”¨ç¨‹åºçš„å…³é”®æ–‡ä»¶ï¼š</p><ul><li><code>/src</code><ul><li><code>index.js</code>: the starting point for the app</li><li><code>App.js</code>: the top-level React component</li><li><code>/app</code><ul><li><code>store.js</code>: creates the Redux store instance</li></ul></li><li><code>/features</code><ul><li><code>/counter</code><ul><li><code>Counter.js</code>: a React component that shows the UI for the counter feature</li><li><code>counterSlice.js</code>: the Redux logic for the counter feature</li></ul></li></ul></li></ul></li></ul><p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹ Redux store æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åˆ›å»º-redux-store"></a>åˆ›å»º Redux Store<a class="hash-link" href="#åˆ›å»º-redux-store" title="Direct link to heading">#</a></h3><p>æ‰“å¼€ <code>app/store.js</code>ï¼Œä»£ç æ˜¯è¿™æ ·ï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">app/store.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@reduxjs/toolkit&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">counterReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../features/counter/counterSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    counter</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> counterReducer</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Redux store æ˜¯ä½¿ç”¨ Redux Toolkit ä¸­çš„ <code>configureStore</code> å‡½æ•°åˆ›å»ºçš„ã€‚<code>configureStore</code> è¦æ±‚æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ª <code>reducer</code> å‚æ•°ã€‚</p><p>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯èƒ½ç”±è®¸å¤šä¸åŒçš„ç‰¹æ€§ç»„æˆï¼Œæ¯ä¸ªç‰¹æ€§éƒ½å¯èƒ½æœ‰è‡ªå·±çš„ reducer å‡½æ•°ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>configureStore</code> æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ä¸åŒçš„ reducerã€‚ å¯¹è±¡ä¸­çš„é”®å key å°†å®šä¹‰æœ€ç»ˆçŠ¶æ€æ ‘ä¸­çš„é”®å keyã€‚</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º <code>features/counter/counterSlice.js</code> çš„æ–‡ä»¶ï¼Œå®ƒä¸ºè®¡æ•°å™¨é€»è¾‘å¯¼å‡ºäº†ä¸€ä¸ª reducer å‡½æ•°ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨æ­¤å¤„å¯¼å…¥ <code>counterReducer</code> å‡½æ•°ï¼Œå¹¶åœ¨åˆ›å»º store æ—¶åŒ…å«å®ƒã€‚</p><p>å½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªåƒ <code>{counter: counterReducer}</code> è¿™æ ·çš„å¯¹è±¡æ—¶ï¼Œå®ƒè¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›åœ¨ Redux çŠ¶æ€å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª <code>state.counter</code> éƒ¨åˆ†ï¼Œå¹¶ä¸”æˆ‘ä»¬å¸Œæœ› <code>counterReducer</code> å‡½æ•°è´Ÿè´£å†³å®šæ˜¯å¦ä»¥åŠå¦‚ä½•åœ¨ dispatch action æ—¶æ›´æ–° <code>state.counter</code> éƒ¨åˆ†ã€‚</p><p>Redux å…è®¸ä½¿ç”¨ä¸åŒç±»å‹çš„æ’ä»¶ï¼ˆâ€œä¸­é—´ä»¶â€å’Œâ€œå¢å¼ºå™¨â€ï¼‰è‡ªå®šä¹‰ store è®¾ç½®ã€‚<code>configureStore</code> é»˜è®¤ä¼šè‡ªåŠ¨åœ¨ store setup ä¸­æ·»åŠ å‡ ä¸ªä¸­é—´ä»¶ä»¥æä¾›è‰¯å¥½çš„å¼€å‘è€…ä½“éªŒï¼Œå¹¶ä¸”è¿˜è®¾ç½® store ä»¥ä¾¿ Redux DevTools Extension å¯ä»¥æ£€æŸ¥å…¶å†…å®¹ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redux-åˆ‡ç‰‡ï¼ˆsliceï¼‰"></a>Redux åˆ‡ç‰‡ï¼ˆSliceï¼‰<a class="hash-link" href="#redux-åˆ‡ç‰‡ï¼ˆsliceï¼‰" title="Direct link to heading">#</a></h4><p><strong>â€œåˆ‡ç‰‡â€æ˜¯åº”ç”¨ä¸­å•ä¸ªåŠŸèƒ½çš„ Redux reducer é€»è¾‘å’Œ action çš„é›†åˆ</strong>, é€šå¸¸ä¸€èµ·å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¯¥åç§°æ¥è‡ªäºå°†æ ¹ Redux çŠ¶æ€å¯¹è±¡æ‹†åˆ†ä¸ºå¤šä¸ªçŠ¶æ€â€œåˆ‡ç‰‡â€ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªåšå®¢åº”ç”¨ä¸­ï¼Œstore çš„é…ç½®å¤§è‡´é•¿è¿™æ ·ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@reduxjs/toolkit&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">usersReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../features/users/usersSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">postsReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../features/posts/postsSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">commentsReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../features/comments/commentsSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    users</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    posts</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> postsReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    comments</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> commentsReducer</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¾‹å­ä¸­ï¼Œ<code>state.users</code>ï¼Œ<code>state.posts</code>ï¼Œå’Œ <code>state.comments</code> å‡æ˜¯ Redux state çš„ä¸€ä¸ªåˆ‡ç‰‡â€œsliceâ€ã€‚ç”±äº <code>usersReducer</code> è´Ÿè´£æ›´æ–° <code>state.users</code> åˆ‡ç‰‡ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºâ€œslice reducerâ€å‡½æ•°ã€‚</p><details class="detailed-explanation"><summary><h4>ç»†èŠ‚è¯´æ˜ï¼šReducer ä¸ State çš„ç»“æ„</h4></summary><p>Redux store éœ€è¦åœ¨åˆ›å»ºæ—¶ä¼ å…¥ä¸€ä¸ªâ€œroot reducerâ€å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰è®¸å¤šä¸åŒçš„ slice reducer å‡½æ•°ï¼Œæˆ‘ä»¬å¦‚ä½•è·å¾—å•ä¸ª root reducerï¼Œä»¥åŠå®ƒå¦‚ä½•å®šä¹‰ Redux store ä¸­ state çš„å†…å®¹å‘¢ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬å°è¯•æ‰‹åŠ¨è°ƒç”¨æ‰€æœ‰ slice çš„ reducerï¼Œå®ƒå¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">rootReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color:#F8F8F2">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#F8F8F2">{</span><span class="token parameter punctuation" style="color:#F8F8F2">}</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    users</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">usersReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">users</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    posts</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">postsReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">posts</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    comments</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">commentsReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">comments</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¼šå•ç‹¬è°ƒç”¨æ¯ä¸ª slice reducerï¼Œä¼ å…¥ Redux çŠ¶æ€çš„ç‰¹å®šåˆ‡ç‰‡ï¼Œå¹¶å°†æ¯ä¸ªè¿”å›å€¼åŒ…å«åœ¨æœ€ç»ˆçš„æ–° Redux çŠ¶æ€å¯¹è±¡ä¸­ã€‚</p><p>Redux æœ‰ä¸€ä¸ªåä¸º <a href="/api/combinereducers"><code>combineReducers</code></a> çš„å‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ‰§è¡Œæ­¤æ“ä½œã€‚å®ƒæ¥å—ä¸€ä¸ªå…¨æ˜¯ slice reducer çš„å¯¹è±¡ä½œä¸ºå…¶å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨è°ƒåº¦æ“ä½œæ—¶è°ƒç”¨æ¯ä¸ª slice reducerã€‚æ¯ä¸ª slice reducer çš„ç»“æœéƒ½ç»„åˆæˆä¸€ä¸ªå¯¹è±¡ä½œä¸ºæœ€ç»ˆç»“æœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>combineReducers</code> åšå’Œå‰é¢ä¾‹å­ä¸€æ ·çš„äº‹æƒ…ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> rootReducer </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">combineReducers</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  users</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  posts</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> postsReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  comments</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> commentsReducer</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å½“æˆ‘ä»¬å°† slice reducer çš„å¯¹è±¡ä¼ é€’ç»™ <code>configureStore</code> æ—¶ï¼Œå®ƒä¼šå°†è¿™äº›å¯¹è±¡ä¼ é€’ç»™ <code>combineReducers</code> ä»¥ä¾¿æˆ‘ä»¬ç”Ÿæˆæ ¹ reducerã€‚</p><p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ª reducer å‡½æ•°ä½œä¸º <code>reducer</code> å‚æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> store </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> rootReducer</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></details><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åˆ›å»º-slice-reducer-å’Œ-action"></a>åˆ›å»º Slice Reducer å’Œ Action<a class="hash-link" href="#åˆ›å»º-slice-reducer-å’Œ-action" title="Direct link to heading">#</a></h3><p>æ—¢ç„¶æˆ‘ä»¬çŸ¥é“<code>counterReducer</code> å‡½æ•°æ¥è‡ª <code>features/counter/counterSlice.js</code>ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬ä¸€å—ä¸€å—åœ°çœ‹çœ‹é‚£ä¸ªæ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆã€‚</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/counterSlice.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@reduxjs/toolkit&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> counterSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;counter&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">increment</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// Redux Toolkit allows us to write &quot;mutating&quot; logic in reducers. It</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// doesn&#x27;t actually mutate the state because it uses the immer library,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// which detects changes to a &quot;draft state&quot; and produces a brand new</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// immutable state based off those changes</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">decrement</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">-=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">incrementByAmount</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> decrement</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> incrementByAmount </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">actions</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">reducer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ—©äº›æ—¶å€™ï¼Œæˆ‘ä»¬çœ‹åˆ°å•å‡» UI ä¸­çš„ä¸åŒæŒ‰é’®ä¼š dispatch ä¸‰ç§ä¸åŒç±»å‹çš„ Redux actionï¼š</p><ul><li><code>{type: &quot;counter/increment&quot;}</code></li><li><code>{type: &quot;counter/decrement&quot;}</code></li><li><code>{type: &quot;counter/incrementByAmount&quot;}</code></li></ul><p>æˆ‘ä»¬çŸ¥é“ action æ˜¯å¸¦æœ‰ <code>type</code> å­—æ®µçš„æ™®é€šå¯¹è±¡ï¼Œ<code>type</code> å­—æ®µæ€»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æˆ‘ä»¬é€šå¸¸æœ‰ action creator å‡½æ•°æ¥åˆ›å»ºå’Œè¿”å› action å¯¹è±¡ã€‚é‚£ä¹ˆåœ¨å“ªé‡Œå®šä¹‰ action å¯¹è±¡ã€ç±»å‹å­—ç¬¦ä¸²å’Œ action creator å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬<em>å¯ä»¥</em>æ¯æ¬¡éƒ½æ‰‹å†™ã€‚ä½†æ˜¯ï¼Œé‚£ä¼šå¾ˆä¹å‘³ã€‚æ­¤å¤–ï¼ŒRedux ä¸­<em>çœŸæ­£</em>é‡è¦çš„æ˜¯ reducer å‡½æ•°ï¼Œä»¥åŠå…¶ä¸­è®¡ç®—æ–°çŠ¶æ€çš„é€»è¾‘ã€‚</p><p>Redux Toolkit æœ‰ä¸€ä¸ªåä¸º <code>createSlice</code> çš„å‡½æ•°ï¼Œå®ƒè´Ÿè´£ç”Ÿæˆ action ç±»å‹å­—ç¬¦ä¸²ã€action creator å‡½æ•°å’Œ action å¯¹è±¡çš„å·¥ä½œã€‚æ‚¨æ‰€è¦åšçš„å°±æ˜¯ä¸ºè¿™ä¸ªåˆ‡ç‰‡å®šä¹‰ä¸€ä¸ªåç§°ï¼Œç¼–å†™ä¸€ä¸ªåŒ…å« reducer å‡½æ•°çš„å¯¹è±¡ï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ action ä»£ç ã€‚<code>name</code> é€‰é¡¹çš„å­—ç¬¦ä¸²ç”¨ä½œæ¯ä¸ª action ç±»å‹çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæ¯ä¸ª reducer å‡½æ•°çš„é”®åç”¨ä½œç¬¬äºŒéƒ¨åˆ†ã€‚å› æ­¤ï¼Œ<code>&quot;counter&quot;</code> åç§° + <code>&quot;increment&quot;</code> reducer å‡½æ•°ç”Ÿæˆäº†ä¸€ä¸ª action ç±»å‹ <code>{type: &quot;counter/increment&quot;}</code>ã€‚ï¼ˆæ¯•ç«Ÿï¼Œå¦‚æœè®¡ç®—æœºå¯ä»¥ä¸ºæˆ‘ä»¬åšï¼Œä¸ºä»€ä¹ˆè¦æ‰‹å†™ï¼ï¼‰</p><p>é™¤äº† <code>name</code> å­—æ®µï¼Œ<code>createSlice</code> è¿˜éœ€è¦æˆ‘ä»¬ä¸º reducer ä¼ å…¥åˆå§‹çŠ¶æ€å€¼ï¼Œä»¥ä¾¿åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å°±æœ‰ä¸€ä¸ª <code>state</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªä» 0 å¼€å§‹çš„ <code>value</code> å­—æ®µã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸‰ä¸ª reducer å‡½æ•°ï¼Œå®ƒä»¬å¯¹åº”äºé€šè¿‡å•å‡»ä¸åŒæŒ‰é’® dispatc çš„ä¸‰ç§ä¸åŒçš„ action ç±»å‹ã€‚</p><p><code>createSlice</code> ä¼šè‡ªåŠ¨ç”Ÿæˆä¸æˆ‘ä»¬ç¼–å†™çš„ reducer å‡½æ•°åŒåçš„ action creatorã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ªæ¥æ£€æŸ¥å®ƒå¹¶æŸ¥çœ‹å®ƒè¿”å›çš„å†…å®¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token console class-name">console</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">log</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">increment</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// {type: &quot;counter/increment&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å®ƒè¿˜ç”ŸæˆçŸ¥é“å¦‚ä½•å“åº”æ‰€æœ‰è¿™äº› action ç±»å‹çš„ slice reducer å‡½æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">reducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">increment</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">log</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">newState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// {value: 11}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reducer-çš„è§„åˆ™"></a>Reducer çš„è§„åˆ™<a class="hash-link" href="#reducer-çš„è§„åˆ™" title="Direct link to heading">#</a></h3><p>ä¸Šä¸€èŠ‚è®²è¿‡ï¼ŒReducer å¿…éœ€ç¬¦åˆä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>ä»…ä½¿ç”¨ <code>state</code> å’Œ <code>action</code> å‚æ•°è®¡ç®—æ–°çš„çŠ¶æ€å€¼</li><li>ç¦æ­¢ç›´æ¥ä¿®æ”¹ <code>state</code>ã€‚å¿…é¡»é€šè¿‡å¤åˆ¶ç°æœ‰çš„ <code>state</code> å¹¶å¯¹å¤åˆ¶çš„å€¼è¿›è¡Œæ›´æ”¹çš„æ–¹å¼æ¥åš <em>ä¸å¯å˜æ›´æ–°ï¼ˆimmutable updatesï¼‰</em>ã€‚</li><li>ç¦æ­¢ä»»ä½•å¼‚æ­¥é€»è¾‘ã€ä¾èµ–éšæœºå€¼æˆ–å¯¼è‡´å…¶ä»–â€œå‰¯ä½œç”¨â€çš„ä»£ç </li></ul><p>ä½†ä¸ºä»€ä¹ˆè¿™äº›è§„åˆ™å¾ˆé‡è¦ï¼Ÿæœ‰å‡ ä¸ªä¸åŒçš„åŸå› ï¼š</p><ul><li>Redux çš„ç›®æ ‡ä¹‹ä¸€æ˜¯ä½¿æ‚¨çš„ä»£ç å¯é¢„æµ‹ã€‚å½“å‡½æ•°çš„è¾“å‡ºä»…æ ¹æ®è¾“å…¥å‚æ•°è®¡ç®—æ—¶ï¼Œæ›´å®¹æ˜“ç†è§£è¯¥ä»£ç çš„å·¥ä½œåŸç†å¹¶å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚</li><li>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¾èµ–äºè‡ªèº«ä¹‹å¤–çš„å˜é‡ï¼Œæˆ–è€…è¡Œä¸ºéšæœºï¼Œä½ æ°¸è¿œä¸çŸ¥é“è¿è¡Œå®ƒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</li><li>å¦‚æœä¸€ä¸ªå‡½æ•° mutate äº†å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚å®ƒçš„å‚æ•°ï¼Œè¿™å¯èƒ½ä¼šæ„å¤–åœ°æ”¹å˜åº”ç”¨ç¨‹åºçš„å·¥ä½œæ–¹å¼ã€‚è¿™å¯èƒ½æ˜¯é”™è¯¯çš„å¸¸è§æ¥æºï¼Œä¾‹å¦‚â€œæˆ‘æ›´æ–°äº†æˆ‘çš„çŠ¶æ€ï¼Œä½†ç°åœ¨æˆ‘çš„ UI æ²¡æœ‰åœ¨åº”è¯¥æ›´æ–°çš„æ—¶å€™æ›´æ–°ï¼â€</li><li>Redux DevTools çš„ä¸€äº›åŠŸèƒ½å–å†³äºä½ çš„ reducer æ˜¯å¦æ­£ç¡®éµå¾ªè¿™äº›è§„åˆ™</li></ul><p>â€œä¸å¯å˜æ›´æ–°ï¼ˆImmutable Updatesï¼‰â€ è¿™ä¸ªè§„åˆ™å°¤å…¶é‡è¦ï¼Œå€¼å¾—è¿›ä¸€æ­¥è®¨è®ºã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reducer-ä¸-ä¸å¯å˜æ›´æ–°"></a>Reducer ä¸ ä¸å¯å˜æ›´æ–°<a class="hash-link" href="#reducer-ä¸-ä¸å¯å˜æ›´æ–°" title="Direct link to heading">#</a></h3><p>å‰é¢è®²è¿‡ â€œå¯å˜æ›´æ–° mutationâ€ï¼ˆæ›´æ–°å·²æœ‰å¯¹è±¡/æ•°ç»„çš„å€¼ï¼‰ä¸â€œä¸å¯å˜æ›´æ–° immutabilityâ€ï¼ˆè®¤ä¸ºå€¼æ˜¯ä¸å¯ä»¥æ”¹å˜çš„ï¼‰</p><p>åœ¨ Redux ä¸­ï¼Œ<strong><em>æ°¸è¿œ</em> ä¸å…è®¸åœ¨ reducer ä¸­æ›´æ”¹ state çš„åŸå§‹å¯¹è±¡ï¼</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// âŒ éæ³• - é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†æ›´æ”¹ stateï¼</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">123</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>:::</p><p>ä¸èƒ½åœ¨ Redux ä¸­æ›´æ”¹ state æœ‰å‡ ä¸ªåŸå› ï¼š</p><ul><li>å®ƒä¼šå¯¼è‡´ bugï¼Œä¾‹å¦‚ UI æœªæ­£ç¡®æ›´æ–°ä»¥æ˜¾ç¤ºæœ€æ–°å€¼</li><li>æ›´éš¾ç†è§£çŠ¶æ€æ›´æ–°çš„åŸå› å’Œæ–¹å¼</li><li>ç¼–å†™æµ‹è¯•å˜å¾—æ›´åŠ å›°éš¾</li><li>å®ƒæ‰“ç ´äº†æ­£ç¡®ä½¿ç”¨â€œæ—¶é—´æ—…è¡Œè°ƒè¯•â€çš„èƒ½åŠ›</li><li>å®ƒè¿èƒŒäº† Redux çš„é¢„æœŸç²¾ç¥å’Œä½¿ç”¨æ¨¡å¼</li></ul><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬ä¸èƒ½æ›´æ”¹åŸä»¶ï¼Œæˆ‘ä»¬å¦‚ä½•è¿”å›æ›´æ–°çš„çŠ¶æ€å‘¢ï¼Ÿ</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><strong>Reducer ä¸­å¿…éœ€è¦å…ˆåˆ›å»ºåŸå§‹å€¼çš„<em>å‰¯æœ¬</em>ï¼Œç„¶åå¯ä»¥æ”¹å˜å‰¯æœ¬ã€‚</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// âœ… è¿™æ ·æ“ä½œæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºåˆ›å»ºäº†å‰¯æœ¬</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">123</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°æˆ‘ä»¬å¯ä»¥<a href="/tutorials/essentials/part-1-overview-concepts#immutability">æ‰‹åŠ¨ç¼–å†™ä¸å¯å˜æ›´æ–°</a>ï¼Œé€šè¿‡ä½¿ç”¨ JavaScript çš„æ•°ç»„/å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦å’Œå…¶ä»–è¿”å›åŸå§‹å€¼å‰¯æœ¬çš„å‡½æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è®¤ä¸ºâ€œä»¥è¿™ç§æ–¹å¼æ‰‹åŠ¨ç¼–å†™ä¸å¯å˜æ›´æ–°çœ‹èµ·æ¥å¾ˆéš¾è®°ä½å’Œæ­£ç¡®æ‰§è¡Œâ€â€¦â€¦æ˜¯çš„ï¼Œæ‚¨æ˜¯å¯¹çš„ï¼:)</p><p>æ‰‹åŠ¨ç¼–å†™ä¸å¯å˜çš„æ›´æ–°é€»è¾‘ç¡®å®ç¹çï¼Œè€Œä¸”åœ¨ reducer ä¸­æ„å¤–æ”¹å˜çŠ¶æ€æ˜¯ Redux ç”¨æˆ·æœ€å¸¸çŠ¯çš„ä¸€ä¸ªé”™è¯¯ã€‚</p><p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Redux Toolkit çš„ <code>createSlice</code> å‡½æ•°å¯ä»¥è®©æ‚¨ä»¥æ›´ç®€å•çš„æ–¹å¼ç¼–å†™ä¸å¯å˜æ›´æ–°ï¼</strong></p><p><code>createSlice</code> å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªåä¸º <a href="https://immerjs.github.io/immer/" target="_blank" rel="noopener noreferrer">Immer</a> çš„åº“ã€‚ Immer ä½¿ç”¨ä¸€ç§ç§°ä¸º â€œProxyâ€ çš„ç‰¹æ®Š JS å·¥å…·æ¥åŒ…è£…æ‚¨æä¾›çš„æ•°æ®ï¼Œå½“ä½ å°è¯• â€mutateâ€œ è¿™äº›æ•°æ®çš„æ—¶å€™ï¼Œå¥‡è¿¹å‘ç”Ÿäº†ï¼Œ<strong>Immer ä¼šè·Ÿè¸ªæ‚¨å°è¯•è¿›è¡Œçš„æ‰€æœ‰æ›´æ”¹ï¼Œç„¶åä½¿ç”¨è¯¥æ›´æ”¹åˆ—è¡¨è¿”å›ä¸€ä¸ªå®‰å…¨çš„ã€ä¸å¯å˜çš„æ›´æ–°å€¼</strong>ï¼Œå°±å¥½åƒæ‚¨æ‰‹åŠ¨ç¼–å†™äº†æ‰€æœ‰ä¸å¯å˜çš„æ›´æ–°é€»è¾‘ä¸€æ ·ã€‚</p><p>æ‰€ä»¥ï¼Œä¸‹é¢çš„ä»£ç ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">handwrittenReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    first</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">first</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      second</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">first</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">first</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          fourth</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">someValue</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥å˜æˆè¿™æ ·ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">reducerWithImmer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">first</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">fourth</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">someValue</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å˜å¾—éå¸¸æ˜“è¯»ï¼</p><p>ä½†ï¼Œè¿˜æœ‰ä¸€äº›éå¸¸é‡è¦çš„è§„åˆ™è¦è®°ä½ï¼š</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</h5></div><div class="admonition-content"><p><strong>ä½ <em>åªèƒ½</em>åœ¨ Redux Toolkit çš„ <code>createSlice</code> å’Œ <code>createReducer</code> ä¸­ç¼–å†™ â€œmutationâ€ é€»è¾‘ï¼Œå› ä¸ºå®ƒä»¬åœ¨å†…éƒ¨ä½¿ç”¨ Immerï¼å¦‚æœä½ åœ¨æ²¡æœ‰ Immer çš„ reducer ä¸­ç¼–å†™ mutation é€»è¾‘ï¼Œå®ƒ<em>å°†</em>æ”¹å˜çŠ¶æ€å¹¶å¯¼è‡´é”™è¯¯ï¼</strong></p></div></div><p>è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹è®¡æ•°å™¨ slice ä¸­çš„å®é™…çš„ reducerã€‚</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/counterSlice.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> counterSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;counter&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">increment</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// Redux Toolkit allows us to write &quot;mutating&quot; logic in reducers. It</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// doesn&#x27;t actually mutate the state because it uses the immer library,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// which detects changes to a &quot;draft state&quot; and produces a brand new</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// immutable state based off those changes</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">decrement</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">-=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">incrementByAmount</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>increment</code> reducer æ€»æ˜¯ç»™ <code>state.value</code> åŠ  1ã€‚ å› ä¸º Immer çŸ¥é“æˆ‘ä»¬å·²ç»å¯¹åŸæ¥çš„ <code>state</code> å¯¹è±¡è¿›è¡Œäº†æ›´æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šä¸å¿…åœ¨æ­¤å¤„è¿”å›ä»»ä½•å†…å®¹ã€‚ åŒç†ï¼Œ<code>decrement</code> reducer å‡ 1ã€‚</p><p>åœ¨è¿™ä¸¤ä¸ª reducer ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¸éœ€è¦è®©æˆ‘ä»¬çš„ä»£ç æŸ¥çœ‹ <code>action</code> å¯¹è±¡ã€‚å®ƒæ— è®ºå¦‚ä½•éƒ½ä¼šè¢«ä¼ å…¥ï¼Œä½†ç”±äºæˆ‘ä»¬ä¸éœ€è¦å®ƒï¼Œæˆ‘ä»¬å¯ä»¥çœæ‰æŠŠ <code>action</code> å£°æ˜ä¸º reducer çš„å‚æ•°ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œ<code>incrementByAmount</code> è¿™ä¸ª reducer è¿˜éœ€è¦çŸ¥é“æ›´å¤šä¿¡æ¯ï¼šå®ƒåº”è¯¥å¢åŠ å¤šå°‘è®¡æ•°å™¨å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°† reducer å£°æ˜ä¸ºåŒæ—¶å…·æœ‰ <code>state</code> å’Œ <code>action</code> å‚æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„é‡‘é¢è¢«æ”¾å…¥ <code>action.payload</code> å­—æ®µï¼Œè¿™å°±æ˜¯è¦è¢«æ·»åŠ åˆ° <code>state.value</code> çš„å€¼ã€‚</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>æƒ³äº†è§£æ›´å¤šï¼Ÿ</h5></div><div class="admonition-content"><p>å…³äºä¸å˜æ€§å’Œç¼–å†™ä¸å¯å˜æ›´æ–°çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="/recipes/structuring-reducers/immutable-update-patterns">â€œä¸å¯å˜æ›´æ–°æ¨¡å¼â€æ–‡æ¡£é¡µé¢</a> å’Œ <a href="https://daveceddia.com/react-redux-immutability-guide/" target="_blank" rel="noopener noreferrer">The Complete Guide to Immutability in React and Redux</a>ã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç”¨-thunk-ç¼–å†™å¼‚æ­¥é€»è¾‘"></a>ç”¨ Thunk ç¼–å†™å¼‚æ­¥é€»è¾‘<a class="hash-link" href="#ç”¨-thunk-ç¼–å†™å¼‚æ­¥é€»è¾‘" title="Direct link to heading">#</a></h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰é€»è¾‘éƒ½æ˜¯åŒæ­¥çš„ã€‚é¦–å…ˆ dispatch actionï¼Œstore è°ƒç”¨ reducer æ¥è®¡ç®—æ–°çŠ¶æ€ï¼Œç„¶å dispatch å‡½æ•°å®Œæˆå¹¶ç»“æŸã€‚ä½†æ˜¯ï¼ŒJavaScript è¯­è¨€æœ‰å¾ˆå¤šç¼–å†™å¼‚æ­¥ä»£ç çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€šå¸¸å…·æœ‰å¼‚æ­¥é€»è¾‘ï¼Œæ¯”å¦‚ä» API è¯·æ±‚æ•°æ®ä¹‹ç±»çš„äº‹æƒ…ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåœ°æ–¹åœ¨æˆ‘ä»¬çš„ Redux åº”ç”¨ç¨‹åºä¸­æ”¾ç½®å¼‚æ­¥é€»è¾‘ã€‚</p><p><strong>thunk</strong> æ˜¯ä¸€ç§ç‰¹å®šç±»å‹çš„ Redux å‡½æ•°ï¼Œå¯ä»¥åŒ…å«å¼‚æ­¥é€»è¾‘ã€‚Thunk æ˜¯ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ç¼–å†™çš„ï¼š</p><ul><li>ä¸€ä¸ªå†…éƒ¨ thunk å‡½æ•°ï¼Œå®ƒä»¥ <code>dispatch</code> å’Œ <code>getState</code> ä½œä¸ºå‚æ•°</li><li>å¤–éƒ¨åˆ›å»ºè€…å‡½æ•°ï¼Œå®ƒåˆ›å»ºå¹¶è¿”å› thunk å‡½æ•°</li></ul><p>ä» <code>counterSlice</code> å¯¼å‡ºçš„å‡½æ•°å°±æ˜¯ä¸€ä¸ª thunk action creator çš„ä¾‹å­ã€‚</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/counterSlice.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// The function below is called a thunk and allows us to perform async logic.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// It can be dispatched like a regular action: `dispatch(incrementAsync(10))`.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// This will call the thunk with the `dispatch` function as the first argument.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Async code can then be executed and other actions can be dispatched</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">incrementAsync</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">amount</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token parameter">dispatch</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">setTimeout</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">incrementByAmount</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1000</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€š Redux action creator ä¸€æ ·ä½¿ç”¨å®ƒä»¬ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">incrementAsync</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token number" style="color:#AE81FF">5</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä½†æ˜¯ï¼Œä½¿ç”¨ thunk éœ€è¦åœ¨åˆ›å»ºæ—¶å°† <code>redux-thunk</code> <em>middleware</em>ï¼ˆä¸€ç§ Redux æ’ä»¶ï¼‰æ·»åŠ åˆ° Redux store ä¸­ã€‚å¹¸è¿çš„æ˜¯ï¼ŒRedux Toolkit çš„ <code>configureStore</code> å‡½æ•°å·²ç»è‡ªåŠ¨ä¸ºæˆ‘ä»¬é…ç½®å¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»§ç»­åœ¨è¿™é‡Œä½¿ç”¨ thunkã€‚</p><p>å½“æ‚¨éœ€è¦è¿›è¡Œ AJAX è°ƒç”¨ä»¥ä»æœåŠ¡å™¨è·å–æ•°æ®æ—¶ï¼Œæ‚¨å¯ä»¥å°†è¯¥è°ƒç”¨æ”¾å…¥ thunk ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªå†™å¾—æœ‰ç‚¹é•¿çš„ä¾‹å­ï¼Œæ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/counterSlice.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// å¤–éƒ¨çš„ thunk creator å‡½æ•°</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">fetchUserById</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">userId</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// å†…éƒ¨çš„ thunk å‡½æ•°</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">dispatch</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// thunk å†…å‘èµ·å¼‚æ­¥æ•°æ®è¯·æ±‚</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> user </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">await</span><span class="token plain"> userAPI</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">fetchById</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">userId</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// ä½†æ•°æ®å“åº”å®Œæˆå dispatch ä¸€ä¸ª action</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">userLoaded</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// å¦‚æœè¿‡ç¨‹å‡ºé”™ï¼Œåœ¨è¿™é‡Œå¤„ç†</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ <a href="/tutorials/essentials/part-5-async-logic">ç¬¬äº”èŠ‚ï¼šå¼‚æ­¥é€»è¾‘å’Œæ•°æ®è¯·æ±‚</a> ä¸­ä¹Ÿä½¿ç”¨åˆ°äº† thunkã€‚</p><details class="detailed-explanation"><summary><h4>ç»†èŠ‚è¯´æ˜ï¼šThunk å’Œå¼‚æ­¥é€»è¾‘</h4></summary><p>æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬ä¸å…è®¸åœ¨ reducer ä¸­æ”¾ç½®ä»»ä½•ç±»å‹çš„å¼‚æ­¥é€»è¾‘ã€‚ä½†æ˜¯ï¼Œè¿™ç§é€»è¾‘å¿…é¡»å­˜åœ¨äºæŸä¸ªåœ°æ–¹ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯ä»¥è®¿é—® Redux çš„ storeï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€äº›å¼‚æ­¥ä»£ç å¹¶åœ¨å®Œæˆåè°ƒç”¨ <code>store.dispatch()</code>ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> store </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> counterReducer </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#E6D874">setTimeout</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">increment</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">250</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä½†æ˜¯ï¼Œåœ¨çœŸæ­£çš„ Redux åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¸å…è®¸å°† store å¯¼å…¥åˆ°å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬çš„ React ç»„ä»¶ä¸­ï¼Œå› ä¸ºå®ƒä½¿ä»£ç æ›´éš¾ä»¥æµ‹è¯•å’Œé‡ç”¨ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç¼–å†™ä¸€äº›æˆ‘ä»¬çŸ¥é“æœ€ç»ˆä¼šä¸<em>ä¸€äº›</em> store ä¸€èµ·ä½¿ç”¨çš„å¼‚æ­¥é€»è¾‘ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“<em>æ˜¯å“ªå—</em> storeã€‚</p><p>Redux çš„ store å¯ä»¥ä½¿ç”¨â€œä¸­é—´ä»¶â€è¿›è¡Œæ‰©å±•ï¼Œä¸­é—´ä»¶æ˜¯ä¸€ç§å¯ä»¥æ·»åŠ é¢å¤–åŠŸèƒ½çš„é™„åŠ ç»„ä»¶æˆ–æ’ä»¶ã€‚ä½¿ç”¨ä¸­é—´ä»¶çš„æœ€å¸¸è§åŸå› æ˜¯è®©æ‚¨ç¼–å†™å…·æœ‰å¼‚æ­¥é€»è¾‘çš„ä»£ç ï¼Œä½†åŒæ—¶ä»èƒ½ä¸ store å¯¹è¯ã€‚ä»–ä»¬è¿˜å¯ä»¥ä¿®æ”¹ storeï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>dispatch()</code> å¹¶ä¼ å…¥æ™®é€š action å¯¹è±¡<em>ä»¥å¤–</em>çš„å€¼ï¼Œä¾‹å¦‚å‡½æ•°æˆ– Promiseã€‚</p><p>Redux Thunk ä¸­é—´ä»¶ä¿®æ”¹äº† store ä»¥è®©æ‚¨å°†å‡½æ•°ä¼ é€’ç»™ <code>dispatch</code>ã€‚äº‹å®ä¸Šï¼Œä»£ç å¾ˆçŸ­ï¼Œåªæœ‰ä¸‹é¢å‡ è¡Œï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">thunkMiddleware</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter punctuation" style="color:#F8F8F2">{</span><span class="token parameter"> dispatch</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> getState </span><span class="token parameter punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">next</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">action</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> action </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;function&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">action</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> getState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">next</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å®ƒå…ˆåˆ¤æ–­ä¼ å…¥ <code>dispatch</code> çš„ action æ˜¯å‡½æ•°è¿˜æ˜¯å¯¹è±¡ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒç”¨å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚å¦åˆ™ï¼Œä¼ å…¥çš„æ˜¯æ™®é€š action å¯¹è±¡ï¼Œå°±æŠŠè¿™ä¸ª action ä¼ é€’ç»™ store å¤„ç†ã€‚</p><p>è¿™å°±è®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ–¹æ³•æ¥å¤„ç†åŒæ­¥æˆ–è€…å¼‚æ­¥æ–¹æ³•ï¼ŒåŒæ—¶ä»ç„¶å¯ä»¥è°ƒç”¨ <code>dispatch</code> å’Œ <code>getState</code>ã€‚</p></details><p>æ­¤æ–‡ä»¶ä¸­è¿˜æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ç¨åä¼šåœ¨æŸ¥çœ‹ <code>&lt;Counter&gt;</code> UI ç»„ä»¶æ—¶è®¨è®ºå®ƒã€‚</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>æƒ³äº†è§£æ›´å¤šï¼Ÿ</h5></div><div class="admonition-content"><p>æŸ¥çœ‹ <a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener noreferrer">the Redux Thunk docs</a>, the post <a href="https://daveceddia.com/what-is-a-thunk/" target="_blank" rel="noopener noreferrer">What the heck is a thunk?</a> and the <a href="/faq/actions#how-can-i-represent-side-effects-such-as-ajax-calls-why-do-we-need-things-like-action-creators-thunks-and-middleware-to-do-async-behavior">Redux FAQ entry on &quot;why do we use middleware for async?&quot;</a> for more information.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-counter-ç»„ä»¶"></a>React Counter ç»„ä»¶<a class="hash-link" href="#react-counter-ç»„ä»¶" title="Direct link to heading">#</a></h3><p>å‰é¢ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªç‹¬ç«‹çš„ React <code>&lt;Counter&gt;</code> ç»„ä»¶æ˜¯ä»€ä¹ˆæ ·çš„ã€‚æˆ‘ä»¬çš„ React+Redux åº”ç”¨ç¨‹åºæœ‰ä¸€ä¸ªç±»ä¼¼çš„ <code>&lt;Counter&gt;</code> ç»„ä»¶ï¼Œä½†å®ƒåšäº†ä¸€äº›ä¸åŒçš„äº‹æƒ…ã€‚</p><p>æˆ‘ä»¬å°†é¦–å…ˆæŸ¥çœ‹ <code>Counter.js</code> ç»„ä»¶æ–‡ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/Counter.js</div><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> React</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> useSelector</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> useDispatch </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  decrement</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  increment</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  incrementByAmount</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  incrementAsync</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  selectCount</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./counterSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> styles </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./Counter.module.css&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">Counter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> count </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectCount</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">incrementAmount</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> setIncrementAmount</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;2&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">div</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">div</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">row</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">button</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">aria-label</span><span class="token tag attr-value punctuation attr-equals" style="color:#F8F8F2">=</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag attr-value" style="color:#E6D874">Increment value</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">dispatch</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">increment</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">        </span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">span</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">value</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">span</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">button</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">aria-label</span><span class="token tag attr-value punctuation attr-equals" style="color:#F8F8F2">=</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag attr-value" style="color:#E6D874">Decrement value</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">          </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">dispatch</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">decrement</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">        </span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token operator" style="color:#F8F8F2">-</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">div</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token comment" style="color:#c6cad2">/* è¿™é‡Œçœç•¥äº†é¢å¤–çš„ render ä»£ç  */</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">div</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸ä¹‹å‰çš„ç®€å• React ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º <code>Counter</code> çš„å‡½æ•°ç»„ä»¶ï¼Œå®ƒå°†ä¸€äº›æ•°æ®å­˜å‚¨åœ¨ <code>useState</code> hooks ä¸­ã€‚</p><p>ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬å¹¶æ²¡æœ‰å°†å½“å‰è®¡æ•°å™¨çš„å€¼å­˜å‚¨ä¸º stateã€‚è€Œæ˜¯æ”¾åˆ° <code>count</code> å˜é‡ä¸­ï¼Œä½†å®ƒä¸æ˜¯æ¥è‡ª <code>useState</code> hooksã€‚</p><p>è™½ç„¶ React åŒ…å«å‡ ä¸ªå†…ç½® hooksï¼Œå¦‚ <code>useState</code> å’Œ <code>useEffect</code>ï¼Œå…¶ä»–åº“å¯ä»¥åˆ›å»ºè‡ªå·±çš„ <a href="https://reactjs.org/docs/hooks-custom.html" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰ hooks</a>ï¼Œä½¿ç”¨ React çš„ hooks æ¥æ„å»ºè‡ªå®šä¹‰é€»è¾‘ã€‚</p><p><a href="https://react-redux.js.org/" target="_blank" rel="noopener noreferrer">React-Redux åº“</a> æœ‰ [ä¸€ç»„è‡ªå®šä¹‰ hooksï¼Œå…è®¸ä½ çš„ React ç»„ä»¶ä¸ Redux store äº¤äº’](<a href="https://react-redux.js" target="_blank" rel="noopener noreferrer">https://react-redux.js</a> .org/api/hooksï¼‰ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä½¿ç”¨-useselector-æå–æ•°æ®"></a>ä½¿ç”¨ <code>useSelector</code> æå–æ•°æ®<a class="hash-link" href="#ä½¿ç”¨-useselector-æå–æ•°æ®" title="Direct link to heading">#</a></h4><p>é¦–å…ˆï¼Œ<code>useSelector</code> è¿™ä¸ª hooks è®©æˆ‘ä»¬çš„ç»„ä»¶ä» Redux çš„ store çŠ¶æ€æ ‘ä¸­æå–å®ƒéœ€è¦çš„ä»»ä½•æ•°æ®ã€‚</p><p>å‰é¢è®²è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ â€œselectorâ€ å‡½æ•°ï¼Œå®ƒä»¥ <code>state</code> ä½œä¸ºå‚æ•°å¹¶è¿”å›çŠ¶æ€æ ‘çš„ä¸€éƒ¨åˆ†ã€‚</p><p><code>counterSlice.js</code> åœ¨åº•éƒ¨æœ‰è¿™ä¸ª selector å‡½æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/counterSlice.js</div><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// The function below is called a selector and allows us to select a value from</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// the state. Selectors can also be defined inline where they&#x27;re used instead of</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// in the slice file. For example: `useSelector((state) =&gt; state.counter.value)`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectCount</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚æœæˆ‘ä»¬å¯ä»¥è®¿é—® Redux çš„ storeï¼Œæˆ‘ä»¬å¯ä»¥å°†å½“å‰è®¡æ•°å™¨å€¼æ£€ç´¢ä¸ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> count </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">selectCount</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">log</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">count</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// 0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬çš„ç»„ä»¶ä¸èƒ½ç›´æ¥ä¸ Redux store å¯¹è¯ï¼Œå› ä¸ºç»„ä»¶æ–‡ä»¶ä¸­ä¸èƒ½å¼•å…¥ storeã€‚ä½†æ˜¯ï¼Œ<code>useSelector</code> è´Ÿè´£ä¸ºæˆ‘ä»¬åœ¨å¹•åä¸ Redux store å¯¹è¯ã€‚ å¦‚æœæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ª selector å‡½æ•°ï¼Œå®ƒä¼šä¸ºæˆ‘ä»¬è°ƒç”¨ <code>someSelector(store.getState())</code>ï¼Œå¹¶è¿”å›ç»“æœã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥è·å– store ä¸­çš„è®¡æ•°å™¨å€¼ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> count </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectCount</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬ä¹Ÿä¸æ˜¯<em>åªèƒ½</em>ä½¿ç”¨å·²ç»å¯¼å‡ºçš„ selectorã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªé€‰æ‹©å™¨å‡½æ•°ä½œä¸º <code>useSelector</code> çš„å†…è”å‚æ•°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> countPlusTwo </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">2</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ¯å½“ä¸€ä¸ª action è¢« dispatch å¹¶ä¸” Redux store è¢«æ›´æ–°æ—¶ï¼Œ<code>useSelector</code> å°†é‡æ–°è¿è¡Œæˆ‘ä»¬çš„é€‰æ‹©å™¨å‡½æ•°ã€‚å¦‚æœé€‰æ‹©å™¨è¿”å›çš„å€¼ä¸ä¸Šæ¬¡ä¸åŒï¼Œ<code>useSelector</code> å°†ç¡®ä¿æˆ‘ä»¬çš„ç»„ä»¶ä½¿ç”¨æ–°å€¼é‡æ–°æ¸²æŸ“ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä½¿ç”¨-usedispatch-æ¥-dispatch-action"></a>ä½¿ç”¨ <code>useDispatch</code> æ¥ dispatch action<a class="hash-link" href="#ä½¿ç”¨-usedispatch-æ¥-dispatch-action" title="Direct link to heading">#</a></h4><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæˆ‘ä»¬å¯ä»¥è®¿é—® Redux storeï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ action creator æ¥ dispatch actionï¼Œæ¯”å¦‚ <code>store.dispatch(increment())</code>ã€‚ ç”±äºæˆ‘ä»¬æ— æ³•è®¿é—® store æœ¬èº«ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŸç§æ–¹å¼æ¥è®¿é—® <code>dispatch</code> æ–¹æ³•ã€‚</p><p><code>useDispatch</code> hooks ä¸ºæˆ‘ä»¬å®Œæˆäº†è¿™é¡¹å·¥ä½œï¼Œå¹¶ä» Redux store ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†å®é™…çš„ <code>dispatch</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä»é‚£é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·æ‰§è¡Œè¯¸å¦‚å•å‡»æŒ‰é’®ä¹‹ç±»çš„æ“ä½œæ—¶ dispatch å¯¹åº” actionï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/Counter.js</div><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">  </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">button</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">  </span><span class="token tag attr-name" style="color:#a6e22e">aria-label</span><span class="token tag attr-value punctuation attr-equals" style="color:#F8F8F2">=</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag attr-value" style="color:#E6D874">Increment value</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">  </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">dispatch</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">increment</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672"></span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»„ä»¶-state-ä¸-è¡¨å•"></a>ç»„ä»¶ State ä¸ è¡¨å•<a class="hash-link" href="#ç»„ä»¶-state-ä¸-è¡¨å•" title="Direct link to heading">#</a></h3><p>ç°åœ¨ä½ å¯èƒ½æƒ³çŸ¥é“ï¼Œâ€œæˆ‘æ˜¯å¦æ€»æ˜¯éœ€è¦å°†æˆ‘æ‰€æœ‰åº”ç”¨ç¨‹åºçš„çŠ¶æ€æ”¾å…¥ Redux storeï¼Ÿâ€</p><p>ç­”æ¡ˆæ˜¯ <strong>ä¸ã€‚æ•´ä¸ªåº”ç”¨ç¨‹åºæ‰€éœ€çš„å…¨å±€çŠ¶æ€åº”è¯¥æ”¾åœ¨ Redux store ä¸­ã€‚è€Œåªåœ¨ä¸€ä¸ªåœ°æ–¹ç”¨åˆ°çš„çŠ¶æ€åº”è¯¥æ”¾åˆ°ç»„ä»¶çš„ stateã€‚</strong></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡† inputï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­è¾“å…¥è¦æ·»åŠ åˆ°è®¡æ•°å™¨çš„ä¸‹ä¸€ä¸ªæ•°å­—ï¼š</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">features/counter/Counter.js</div><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain">incrementAmount</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> setIncrementAmount</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;2&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// later</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">div</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">row</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">input</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">textbox</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">aria-label</span><span class="token tag attr-value punctuation attr-equals" style="color:#F8F8F2">=</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag attr-value" style="color:#E6D874">Set increment amount</span><span class="token tag attr-value punctuation" style="color:#F8F8F2">&quot;</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">incrementAmount</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript parameter" style="color:#F92672">e</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">setIncrementAmount</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript" style="color:#F92672">e</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">target</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">value</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">    </span><span class="token tag punctuation" style="color:#F8F8F2">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">button</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">dispatch</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">incrementByAmount</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">Number</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript" style="color:#F92672">incrementAmount</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">||</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript number" style="color:#AE81FF">0</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">    </span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      Add Amount</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">styles</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript" style="color:#F92672">asyncButton</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">      </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">=&gt;</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript function" style="color:#E6D874">dispatch</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">incrementAsync</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript function" style="color:#E6D874">Number</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">(</span><span class="token tag script language-javascript" style="color:#F92672">incrementAmount</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript operator" style="color:#F8F8F2">||</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript number" style="color:#AE81FF">0</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">)</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag" style="color:#F92672"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token tag" style="color:#F92672">    </span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      Add Async</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">div</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬<em>å¯ä»¥</em>åœ¨ Redux store ä¸­ä¿ç•™å½“å‰æ•°å­—å­—ç¬¦ä¸²ï¼Œæ–¹æ³•æ˜¯åœ¨è¾“å…¥çš„ <code>onChange</code> å¤„ç†ç¨‹åºä¸­ dispatch action å¹¶å°†å…¶ä¿å­˜åœ¨æˆ‘ä»¬çš„ reducer ä¸­ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬å¸¦æ¥ä»»ä½•å¥½å¤„ã€‚å”¯ä¸€ä½¿ç”¨æ–‡æœ¬å­—ç¬¦ä¸²çš„åœ°æ–¹æ˜¯è¿™é‡Œï¼Œåœ¨ <code>&lt;Counter&gt;</code> ç»„ä»¶ä¸­ã€‚ï¼ˆå½“ç„¶ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­åªæœ‰ä¸€ä¸ªå…¶ä»–ç»„ä»¶ï¼š<code>&lt;App&gt;</code>ã€‚ä½†å³ä½¿æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«è®¸å¤šç»„ä»¶çš„æ›´å¤§çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿåªæœ‰ <code>&lt;Counter&gt;</code> å…³å¿ƒè¿™ä¸ªè¾“å…¥å€¼ã€‚ï¼‰</p><p>å› æ­¤ï¼Œå°†è¯¥å€¼ä¿ç•™åœ¨ <code>&lt;Counter&gt;</code> ç»„ä»¶ä¸­çš„ <code>useState</code> çš„ hooks ä¸­æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p>ç±»ä¼¼åœ°ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º <code>isDropdownOpen</code> çš„å¸ƒå°”å€¼ï¼Œåº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–ç»„ä»¶ä¸ä¼šå…³å¿ƒå®ƒâ€”â€”å®ƒåº”è¯¥çœŸæ­£ä¿æŒåœ¨è¿™ä¸ªç»„ä»¶çš„æœ¬åœ°ã€‚</p><p><strong>åœ¨ React + Redux åº”ç”¨ä¸­ï¼Œä½ çš„å…¨å±€çŠ¶æ€åº”è¯¥æ”¾åœ¨ Redux store ä¸­ï¼Œä½ çš„æœ¬åœ°çŠ¶æ€åº”è¯¥ä¿ç•™åœ¨ React ç»„ä»¶ä¸­ã€‚</strong></p><p>å¦‚æœæ‚¨ä¸ç¡®å®šè¯¥æ”¾åœ¨å“ªé‡Œï¼Œè¿™é‡Œæœ‰ä¸€äº›å¸¸ç”¨çš„ç»éªŒæ³•åˆ™ï¼Œç”¨äºç¡®å®šåº”è¯¥å°†å“ªç§æ•°æ®æ”¾å…¥ Reduxï¼š</p><ul><li>åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†æ˜¯å¦å…³å¿ƒè¿™äº›æ•°æ®ï¼Ÿ</li><li>æ‚¨æ˜¯å¦éœ€è¦èƒ½å¤ŸåŸºäºè¿™äº›åŸå§‹æ•°æ®åˆ›å»ºè¿›ä¸€æ­¥çš„æ´¾ç”Ÿæ•°æ®ï¼Ÿ</li><li>æ˜¯å¦ä½¿ç”¨ç›¸åŒçš„æ•°æ®æ¥é©±åŠ¨å¤šä¸ªç»„ä»¶ï¼Ÿ</li><li>èƒ½å¤Ÿå°†è¿™ç§çŠ¶æ€æ¢å¤åˆ°ç»™å®šçš„æ—¶é—´ç‚¹ï¼ˆå³æ—¶é—´æ—…è¡Œè°ƒè¯•ï¼‰å¯¹æ‚¨æ˜¯å¦æœ‰ä»·å€¼ï¼Ÿ</li><li>æ˜¯å¦è¦ç¼“å­˜æ•°æ®ï¼ˆå³ï¼Œå¦‚æœæ•°æ®å·²ç»å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å®ƒçš„çŠ¶æ€è€Œä¸æ˜¯é‡æ–°è¯·æ±‚å®ƒï¼‰ï¼Ÿ</li><li>æ‚¨æ˜¯å¦å¸Œæœ›åœ¨çƒ­é‡è½½ UI ç»„ä»¶ï¼ˆäº¤æ¢æ—¶å¯èƒ½ä¼šä¸¢å¤±å…¶å†…éƒ¨çŠ¶æ€ï¼‰æ—¶ä¿æŒæ­¤æ•°æ®ä¸€è‡´ï¼Ÿ</li></ul><p>è¿™ä¹Ÿæ˜¯ä¸€èˆ¬å¦‚ä½•åœ¨ Redux ä¸­è€ƒè™‘è¡¨å•çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ <strong>å¤§å¤šæ•°è¡¨å•çš„ state ä¸åº”è¯¥ä¿å­˜åœ¨ Redux ä¸­ã€‚</strong> ç›¸åï¼Œåœ¨ç¼–è¾‘è¡¨å•çš„æ—¶å€™æŠŠæ•°æ®å­˜åˆ°è¡¨å•ç»„ä»¶ä¸­ï¼Œå½“ç”¨æˆ·æäº¤è¡¨å•çš„æ—¶å€™å† dispatch action æ¥æ›´æ–° storeã€‚</p><p>åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰è¦æ³¨æ„çš„å¦ä¸€ä»¶äº‹æ˜¯ï¼šè¿˜è®°å¾— <code>counterSlice.js</code> ä¸­çš„ <code>incrementAsync</code> è¿™ä¸ª thunk å—ï¼Ÿæˆ‘ä»¬åœ¨è¿™ä¸ªç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒçš„æ–¹å¼ä¸ dispatch å…¶ä»–æ™®é€šçš„ action æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ªç»„ä»¶ä¸å…³å¿ƒæˆ‘ä»¬æ˜¯åœ¨ dispatch ä¸€ä¸ªæ™®é€šçš„ action è¿˜æ˜¯å¼‚æ­¥é€»è¾‘ã€‚å®ƒåªçŸ¥é“å½“ä½ ç‚¹å‡»é‚£ä¸ªæŒ‰é’®æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œ dispatchã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="providing-the-store"></a>Providing the Store<a class="hash-link" href="#providing-the-store" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°æˆ‘ä»¬çš„ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>useSelector</code> å’Œ <code>useDispatch</code> è¿™ä¸¤ä¸ª hooks ä¸ Redux çš„ store é€šä¿¡ã€‚å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¼å…¥ storeï¼Œé‚£ä¹ˆè¿™äº› hooks æ€ä¹ˆçŸ¥é“è¦ä¸å“ªä¸ª Redux store å¯¹è¯å‘¢ï¼Ÿ</p><p>ç°åœ¨æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è¿™ä¸ªåº”ç”¨ç¨‹åºçš„å…¨è²Œï¼Œæ˜¯æ—¶å€™å›åˆ°è¿™ä¸ªåº”ç”¨ç¨‹åºçš„èµ·ç‚¹ï¼Œçœ‹çœ‹æ‹¼å›¾çš„æœ€åéƒ¨åˆ†æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„ã€‚</p><div class="codeBlockContainer_K1bP"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_eoMF">index.js</div><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> ReactDOM </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-dom&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./index.css&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> App </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./App&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> store </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./app/store&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> Provider </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">*</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> serviceWorker </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./serviceWorker&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">ReactDOM</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">render</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag class-name" style="color:#F92672">Provider</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">store</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">store</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag class-name" style="color:#F92672">App</span><span class="token tag" style="color:#F92672"> </span><span class="token tag punctuation" style="color:#F8F8F2">/&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag class-name" style="color:#F92672">Provider</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  document</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">getElementById</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;root&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬æ€»æ˜¯å¿…é¡»è°ƒç”¨ <code>ReactDOM.render(&lt;App /&gt;)</code> æ¥å‘Šè¯‰ React å¼€å§‹æ¸²æŸ“æˆ‘ä»¬çš„æ ¹ <code>&lt;App&gt;</code> ç»„ä»¶ã€‚ ä¸ºäº†è®©åƒ <code>useSelector</code> è¿™æ ·çš„ hooks æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªåä¸º <code>&lt;Provider&gt;</code> çš„ç»„ä»¶åœ¨å¹•åä¼ é€’ Redux storeï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥è®¿é—®å®ƒã€‚</p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå¼•ç”¨æ¥è‡ª <code>app/store.js</code> ä¸­åˆ›å»ºçš„ storeã€‚ç„¶åï¼Œç”¨ <code>&lt;Provider&gt;</code> åŒ…è£¹æ•´ä¸ª <code>&lt;App&gt;</code>ï¼Œå¹¶ä¼ å…¥ storeï¼š<code>&lt;Provider store={store}&gt;</code>ã€‚</p><p>ç°åœ¨ï¼Œä»»ä½•è°ƒç”¨ <code>useSelector</code> æˆ– <code>useDispatch</code> çš„ React ç»„ä»¶éƒ½å¯ä»¥è®¿é—® <code>&lt;Provider&gt;</code> ä¸­çš„ storeã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä½ å­¦åˆ°äº†"></a>ä½ å­¦åˆ°äº†<a class="hash-link" href="#ä½ å­¦åˆ°äº†" title="Direct link to heading">#</a></h2><p>å°½ç®¡ Count è¿™ä¸ªåº”ç”¨ç¨‹åºéå¸¸å°ï¼Œä½†å®ƒå±•ç¤ºäº† React + Redux åº”ç”¨ç¨‹åºååŒå·¥ä½œçš„æ‰€æœ‰å…³é”®éƒ¨åˆ†ã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä»¬ä»‹ç»çš„å†…å®¹ï¼š</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><ul><li><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Redux Toolkit <code>configureStore</code> API åˆ›å»ºä¸€ä¸ª Redux store</strong><ul><li><code>configureStore</code> æ¥æ”¶ <code>reducer</code> å‡½æ•°æ¥ä½œä¸ºå‘½åå‚æ•°</li><li><code>configureStore</code> è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼æ¥é…ç½® store</li></ul></li><li><strong>åœ¨ slice æ–‡ä»¶ä¸­ç¼–å†™ Redux é€»è¾‘</strong><ul><li>A &quot;slice&quot; contains the reducer logic and actions related to a specific feature / section of the Redux state</li><li>ä¸€ä¸ª slice åŒ…å«ä¸€ä¸ªç‰¹å®šåŠŸèƒ½æˆ–éƒ¨åˆ†çš„ state ç›¸å…³çš„é€»è¾‘å’Œ action</li><li>Redux Toolkit çš„ <code>createSlice</code> API ä¸ºæ‚¨æä¾›çš„æ¯ä¸ª reducer å‡½æ•°ç”Ÿæˆ action creator å’Œ action ç±»å‹</li></ul></li><li><strong>Redux reducer å¿…é¡»éµå¾ªä¸€ä¸‹åŸåˆ™</strong><ul><li>Should only calculate a new state value based on the <code>state</code> and <code>action</code> arguments</li><li>Must make <em>immutable updates</em> by copying the existing state</li><li>Cannot contain any asynchronous logic or other &quot;side effects&quot;</li><li>Redux Toolkit&#x27;s <code>createSlice</code> API uses Immer to allow &quot;mutating&quot; immutable updates</li></ul></li><li><strong>ä¸€èˆ¬ä½¿ç”¨ â€œthunksâ€ æ¥å¼€å‘ç‰¹å®šçš„å¼‚æ­¥é€»è¾‘</strong><ul><li>Thunks receive <code>dispatch</code> and <code>getState</code> as arguments</li><li>Redux Toolkit enables the <code>redux-thunk</code> middleware by default</li></ul></li><li><strong>ä½¿ç”¨ React-Redux æ¥åš React ç»„ä»¶å’Œ Redux store çš„é€šä¿¡</strong><ul><li>Wrapping the app with <code>&lt;Provider store={store}&gt;</code> enables all components to use the store</li><li>Global state should go in the Redux store, local state should stay in React components</li></ul></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥<a class="hash-link" href="#ä¸‹ä¸€æ­¥" title="Direct link to heading">#</a></h2><p>ç°åœ¨æ‚¨å·²ç»çœ‹åˆ°äº† Redux åº”ç”¨ç¨‹åºçš„æ‰€æœ‰éƒ¨åˆ†ï¼Œæ˜¯æ—¶å€™ç¼–å†™è‡ªå·±çš„åº”ç”¨ç¨‹åºäº†ï¼ åœ¨æœ¬æ•™ç¨‹çš„å…¶ä½™éƒ¨åˆ†ï¼Œæ‚¨å°†æ„å»ºä¸€ä¸ªæ›´å¤§çš„ä½¿ç”¨ Redux çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚ åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æ­£ç¡®ä½¿ç”¨ Redux æ‰€éœ€äº†è§£çš„æ‰€æœ‰å…³é”®æ€æƒ³ã€‚</p><p>ç»§ç»­é˜…è¯» <a href="/tutorials/essentials/part-3-data-flow">ç¬¬ 3 éƒ¨åˆ†ï¼šRedux æ•°æ®æµåŸºç¡€</a> ä»¥å¼€å§‹æ„å»ºç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tutorials/essentials/part-1-overview-concepts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ç¬¬ä¸€èŠ‚ï¼šRedux æ¦‚è¿°å’Œæ¦‚å¿µ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tutorials/essentials/part-3-data-flow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ç¬¬ä¸‰èŠ‚ï¼šæ•°æ®æµåŸºç¡€ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç®€ä»‹" class="table-of-contents__link">ç®€ä»‹</a></li><li><a href="#è®¡æ•°å™¨ç¤ºä¾‹åº”ç”¨ç¨‹åº" class="table-of-contents__link">è®¡æ•°å™¨ç¤ºä¾‹åº”ç”¨ç¨‹åº</a><ul><li><a href="#ä½¿ç”¨è®¡æ•°å™¨åº”ç”¨ç¨‹åº" class="table-of-contents__link">ä½¿ç”¨è®¡æ•°å™¨åº”ç”¨ç¨‹åº</a></li></ul></li><li><a href="#application-å®ç°" class="table-of-contents__link">Application å®ç°</a><ul><li><a href="#åˆ›å»º-redux-store" class="table-of-contents__link">åˆ›å»º Redux Store</a></li><li><a href="#åˆ›å»º-slice-reducer-å’Œ-action" class="table-of-contents__link">åˆ›å»º Slice Reducer å’Œ Action</a></li><li><a href="#reducer-çš„è§„åˆ™" class="table-of-contents__link">Reducer çš„è§„åˆ™</a></li><li><a href="#reducer-ä¸-ä¸å¯å˜æ›´æ–°" class="table-of-contents__link">Reducer ä¸ ä¸å¯å˜æ›´æ–°</a></li><li><a href="#ç”¨-thunk-ç¼–å†™å¼‚æ­¥é€»è¾‘" class="table-of-contents__link">ç”¨ Thunk ç¼–å†™å¼‚æ­¥é€»è¾‘</a></li><li><a href="#react-counter-ç»„ä»¶" class="table-of-contents__link">React Counter ç»„ä»¶</a></li><li><a href="#ç»„ä»¶-state-ä¸-è¡¨å•" class="table-of-contents__link">ç»„ä»¶ State ä¸ è¡¨å•</a></li><li><a href="#providing-the-store" class="table-of-contents__link">Providing the Store</a></li></ul></li><li><a href="#ä½ å­¦åˆ°äº†" class="table-of-contents__link">ä½ å­¦åˆ°äº†</a></li><li><a href="#ä¸‹ä¸€æ­¥" class="table-of-contents__link">ä¸‹ä¸€æ­¥</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started">å…¥é—¨</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/essentials/part-1-overview-concepts">æ•™ç¨‹</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">å¸¸è§é—®é¢˜</a></li><li class="footer__item"><a class="footer__link-item" href="/api/api-reference">API æ–‡æ¡£</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord</a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2015â€“2021 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2c006b44.js"></script>
<script src="/assets/js/main.791b6a23.js"></script>
</body>
</html>